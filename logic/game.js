function a2_0x3f2d(_0x4486bf,_0x3d3fc8){const _0xe2bf17=a2_0xe2bf();return a2_0x3f2d=function(_0x3f2d6f,_0x1d0c1c){_0x3f2d6f=_0x3f2d6f-0x155;let _0x4b15d0=_0xe2bf17[_0x3f2d6f];return _0x4b15d0;},a2_0x3f2d(_0x4486bf,_0x3d3fc8);}(function(_0x3bf05c,_0x58fd8e){const _0x340b53=a2_0x3f2d,_0x4f2f07=_0x3bf05c();while(!![]){try{const _0x3c3b50=-parseInt(_0x340b53(0x159))/0x1*(parseInt(_0x340b53(0x16b))/0x2)+-parseInt(_0x340b53(0x15d))/0x3*(parseInt(_0x340b53(0x16d))/0x4)+parseInt(_0x340b53(0x16e))/0x5*(parseInt(_0x340b53(0x157))/0x6)+-parseInt(_0x340b53(0x158))/0x7+-parseInt(_0x340b53(0x15c))/0x8*(parseInt(_0x340b53(0x16a))/0x9)+-parseInt(_0x340b53(0x15f))/0xa+parseInt(_0x340b53(0x163))/0xb;if(_0x3c3b50===_0x58fd8e)break;else _0x4f2f07['push'](_0x4f2f07['shift']());}catch(_0x3e3e4c){_0x4f2f07['push'](_0x4f2f07['shift']());}}}(a2_0xe2bf,0x66143));import{nextGameId}from'./session.js';const ROWS=0x6,COLS=0x7,EMPTY=0x0;function canUndo(_0x7f0221){const _0x1948a5=a2_0x3f2d;if(_0x7f0221[_0x1948a5(0x166)][_0x1948a5(0x160)]||_0x7f0221[_0x1948a5(0x166)][_0x1948a5(0x167)])return{'undo':![],'message':_0x1948a5(0x155)};if(_0x7f0221['moves']['length']===0x0)return{'undo':![],'message':_0x1948a5(0x162)};return{'undo':!![],'message':null};}function undo(_0x23d50f){const _0x479a0b=a2_0x3f2d,{undo:_0xfecef2,message:_0x330cd9}=canUndo(_0x23d50f);if(!_0xfecef2)throw new Error(_0x330cd9);const _0x142239=_0x23d50f[_0x479a0b(0x16f)]['pop'](),{player:_0x2b24fd,column:_0x509aef}=_0x142239;let _0x1fdfa5=0x0;while(_0x1fdfa5<ROWS&&_0x23d50f[_0x479a0b(0x168)][_0x1fdfa5][_0x509aef]===0x0){_0x1fdfa5=_0x1fdfa5+0x1;}return _0x23d50f[_0x479a0b(0x168)][_0x1fdfa5][_0x509aef]=EMPTY,_0x23d50f[_0x479a0b(0x171)]=_0x2b24fd,_0x23d50f['state']=checkGame(_0x23d50f),{'row':_0x1fdfa5,'column':_0x509aef,'player':_0x2b24fd};}function drop(_0x5cce29,_0x53e2d2,_0x148013){const _0x6d1214=a2_0x3f2d,{drop:_0xf5a012,message:_0x2fc2fd}=canDrop(_0x5cce29,_0x53e2d2,_0x148013);if(!_0xf5a012)throw new Error(_0x2fc2fd);let _0x204304=0x0;while(_0x204304<ROWS&&_0x5cce29[_0x6d1214(0x168)][_0x204304][_0x148013]===0x0){_0x204304=_0x204304+0x1;}console[_0x6d1214(0x172)](_0x6d1214(0x16c)+(_0x204304-0x1)+_0x6d1214(0x15b)+_0x148013+_0x6d1214(0x15e)+_0x53e2d2),_0x5cce29[_0x6d1214(0x168)][_0x204304-0x1][_0x148013]=_0x53e2d2,_0x5cce29[_0x6d1214(0x16f)]['push']({'player':_0x53e2d2,'column':_0x148013}),_0x5cce29[_0x6d1214(0x171)]=_0x53e2d2===0x1?0x2:0x1,_0x5cce29['state']=checkGame(_0x5cce29);}function canDrop(_0xdab249,_0x120966,_0x333254){const _0x3ba8f5=a2_0x3f2d;if(_0xdab249['state']['isWon'])return{'drop':![],'message':_0x3ba8f5(0x173)};if(_0xdab249[_0x3ba8f5(0x166)][_0x3ba8f5(0x167)])return{'drop':![],'message':'Game\x20is\x20a\x20draw!'};if(_0xdab249['nextPlayerId']!==_0x120966)return{'drop':![],'message':_0x3ba8f5(0x161)};if(_0x333254<0x0||_0x333254>=COLS)return{'drop':![],'message':_0x3ba8f5(0x15a)};if(_0xdab249['snapshot'][0x0][_0x333254]!==0x0)return{'drop':![],'message':_0x3ba8f5(0x156)};return{'drop':!![],'message':null};}function checkGame(_0x3efe57){const _0x36a1a5=a2_0x3f2d,_0x100cc7=checkWinner(_0x3efe57);if(_0x100cc7[_0x36a1a5(0x160)])return{'isWon':!![],'isDraw':![],'winnerPlayerId':_0x100cc7['winnerPlayerId']};if(isDraw(_0x3efe57))return{'isWon':![],'isDraw':!![],'winnerPlayerId':null};return{'isWon':![],'isDraw':![],'winnerPlayerId':null};}function checkWinner(_0x3befa5){const _0xc8816=a2_0x3f2d;let _0x50d4ec=_0x3befa5[_0xc8816(0x168)];for(let _0xfbb68f=0x0;_0xfbb68f<ROWS;_0xfbb68f++){for(let _0x12d46f=0x0;_0x12d46f<COLS;_0x12d46f++){const _0x4db3aa=_0x50d4ec[_0xfbb68f][_0x12d46f];if(_0x4db3aa===0x0)continue;if(_0x12d46f+0x3<COLS&&_0x4db3aa===_0x50d4ec[_0xfbb68f][_0x12d46f+0x1]&&_0x4db3aa===_0x50d4ec[_0xfbb68f][_0x12d46f+0x2]&&_0x4db3aa===_0x50d4ec[_0xfbb68f][_0x12d46f+0x3])return{'isWon':!![],'winnerPlayerId':_0x4db3aa};if(_0xfbb68f+0x3<ROWS&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x1][_0x12d46f]&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x2][_0x12d46f]&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x3][_0x12d46f])return{'isWon':!![],'winnerPlayerId':_0x4db3aa};if(_0xfbb68f+0x3<ROWS&&_0x12d46f+0x3<COLS&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x1][_0x12d46f+0x1]&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x2][_0x12d46f+0x2]&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x3][_0x12d46f+0x3])return{'isWon':!![],'winnerPlayerId':_0x4db3aa};if(_0xfbb68f+0x3<ROWS&&_0x12d46f-0x3>=0x0&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x1][_0x12d46f-0x1]&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x2][_0x12d46f-0x2]&&_0x4db3aa===_0x50d4ec[_0xfbb68f+0x3][_0x12d46f-0x3])return{'isWon':!![],'winnerPlayerId':_0x4db3aa};}}return{'isWon':![],'winnerPlayerId':null};}function isDraw(_0x238fa2){const _0x27554c=a2_0x3f2d;return _0x238fa2[_0x27554c(0x16f)][_0x27554c(0x170)]===ROWS*COLS;}function a2_0xe2bf(){const _0xa28096=['Game\x20is\x20won!','Game\x20is\x20over','Column\x20is\x20full','42krPUCm','5735513cbeOiH','2035SapgyE','Column\x20out\x20of\x20bounds','\x20column:\x20','24LVBFjx','23370YJagpm','\x20to\x20player:\x20','7892690udyMeB','isWon','Not\x20your\x20turn!','No\x20moves\x20to\x20undo','29731449gMYjMR','floor','initialPlayerId','state','isDraw','snapshot','Game\x20','1146015suxQoL','104BbyBLF','setting\x20row:\x20','372evTaCN','382985YMrhbQ','moves','length','nextPlayerId','debug'];a2_0xe2bf=function(){return _0xa28096;};return a2_0xe2bf();}function createGame(_0x17a32b,_0x22d903){const _0x558faa=a2_0x3f2d,_0x1da525=nextGameId(_0x17a32b),_0x370c63=_0x5ef401=>{const _0x2c8d9f=a2_0x3f2d;if(_0x5ef401)return _0x5ef401[_0x2c8d9f(0x165)]===0x1?0x2:0x1;return Math[_0x2c8d9f(0x164)](Math['random']()*0x2)+0x1;};return{'id':_0x1da525,'name':_0x558faa(0x169)+_0x1da525,'initialPlayerId':_0x370c63(_0x22d903),'nextPlayerId':_0x370c63(_0x22d903),'moves':[],'snapshot':getEmptySnapshot(),'state':{'isWon':![],'isDraw':![],'winnerPlayerId':null}};}function getEmptySnapshot(){return[[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY]];}export{ROWS,COLS,createGame,canDrop,drop,canUndo,undo};