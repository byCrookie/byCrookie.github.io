(function(_0x303ff6,_0x5885bb){const _0x12b139=a2_0x7ef2,_0x22f01d=_0x303ff6();while(!![]){try{const _0x4b248c=-parseInt(_0x12b139(0x16c))/0x1+parseInt(_0x12b139(0x15a))/0x2+parseInt(_0x12b139(0x173))/0x3+-parseInt(_0x12b139(0x171))/0x4*(parseInt(_0x12b139(0x164))/0x5)+-parseInt(_0x12b139(0x170))/0x6*(parseInt(_0x12b139(0x165))/0x7)+-parseInt(_0x12b139(0x159))/0x8+parseInt(_0x12b139(0x160))/0x9;if(_0x4b248c===_0x5885bb)break;else _0x22f01d['push'](_0x22f01d['shift']());}catch(_0x2ddf7e){_0x22f01d['push'](_0x22f01d['shift']());}}}(a2_0x3802,0xc317c));import{nextGameId}from'./session.js';const ROWS=0x6,COLS=0x7,EMPTY=0x0;function canUndo(_0x14cf0a){const _0x53be0f=a2_0x7ef2;if(_0x14cf0a[_0x53be0f(0x15c)][_0x53be0f(0x16f)]||_0x14cf0a['state'][_0x53be0f(0x166)])return{'undo':![],'message':'Game\x20is\x20over'};if(_0x14cf0a[_0x53be0f(0x15f)]['length']===0x0)return{'undo':![],'message':_0x53be0f(0x167)};return{'undo':!![],'message':null};}function undo(_0x29e1b0){const _0x1745d1=a2_0x7ef2,{undo:_0x1b4f96,message:_0x321b66}=canUndo(_0x29e1b0);if(!_0x1b4f96)throw new Error(_0x321b66);const _0x5d49f1=_0x29e1b0['moves'][_0x1745d1(0x15b)](),{player:_0xc9730c,column:_0x4bd528}=_0x5d49f1;let _0x41ad59=0x0;while(_0x41ad59<ROWS&&_0x29e1b0['snapshot'][_0x41ad59][_0x4bd528]===0x0){_0x41ad59=_0x41ad59+0x1;}return _0x29e1b0['snapshot'][_0x41ad59][_0x4bd528]=EMPTY,_0x29e1b0[_0x1745d1(0x15e)]=_0xc9730c,_0x29e1b0[_0x1745d1(0x15c)]=checkGame(_0x29e1b0),{'row':_0x41ad59,'column':_0x4bd528,'player':_0xc9730c};}function drop(_0x4bc6da,_0x4f8510,_0x590cdc){const _0x4739c9=a2_0x7ef2,{drop:_0x39eca7,message:_0x105bb9}=canDrop(_0x4bc6da,_0x4f8510,_0x590cdc);if(!_0x39eca7)throw new Error(_0x105bb9);let _0x221187=0x0;while(_0x221187<ROWS&&_0x4bc6da['snapshot'][_0x221187][_0x590cdc]===0x0){_0x221187=_0x221187+0x1;}console['debug'](_0x4739c9(0x163)+(_0x221187-0x1)+'\x20column:\x20'+_0x590cdc+_0x4739c9(0x16a)+_0x4f8510),_0x4bc6da[_0x4739c9(0x16d)][_0x221187-0x1][_0x590cdc]=_0x4f8510,_0x4bc6da[_0x4739c9(0x15f)][_0x4739c9(0x15d)]({'player':_0x4f8510,'column':_0x590cdc}),_0x4bc6da[_0x4739c9(0x15e)]=_0x4f8510===0x1?0x2:0x1,_0x4bc6da[_0x4739c9(0x15c)]=checkGame(_0x4bc6da);}function a2_0x3802(){const _0x4ed6b1=['state','push','nextPlayerId','moves','19762839nlxBTy','floor','Game\x20','setting\x20row:\x20','470eOYfqX','14588AGekhi','isDraw','No\x20moves\x20to\x20undo','initialPlayerId','Game\x20is\x20a\x20draw!','\x20to\x20player:\x20','Column\x20out\x20of\x20bounds','696359BCtHfE','snapshot','Column\x20is\x20full','isWon','1356lPYtUX','15724qVEpXm','Not\x20your\x20turn!','3592716uIdiob','10364960lUKfJj','476268FDCQrt','pop'];a2_0x3802=function(){return _0x4ed6b1;};return a2_0x3802();}function canDrop(_0x31c01,_0x4c3752,_0x374f44){const _0x388f22=a2_0x7ef2;if(_0x31c01[_0x388f22(0x15c)][_0x388f22(0x16f)])return{'drop':![],'message':'Game\x20is\x20won!'};if(_0x31c01[_0x388f22(0x15c)]['isDraw'])return{'drop':![],'message':_0x388f22(0x169)};if(_0x31c01['nextPlayerId']!==_0x4c3752)return{'drop':![],'message':_0x388f22(0x172)};if(_0x374f44<0x0||_0x374f44>=COLS)return{'drop':![],'message':_0x388f22(0x16b)};if(_0x31c01[_0x388f22(0x16d)][0x0][_0x374f44]!==0x0)return{'drop':![],'message':_0x388f22(0x16e)};return{'drop':!![],'message':null};}function checkGame(_0x27221a){const _0x3e4f55=checkWinner(_0x27221a);if(_0x3e4f55['isWon'])return{'isWon':!![],'isDraw':![],'winnerPlayerId':_0x3e4f55['winnerPlayerId']};if(isDraw(_0x27221a))return{'isWon':![],'isDraw':!![],'winnerPlayerId':null};return{'isWon':![],'isDraw':![],'winnerPlayerId':null};}function checkWinner(_0x141c60){let _0x78e4f8=_0x141c60['snapshot'];for(let _0x10b81b=0x0;_0x10b81b<ROWS;_0x10b81b++){for(let _0x3e094d=0x0;_0x3e094d<COLS;_0x3e094d++){const _0xd67436=_0x78e4f8[_0x10b81b][_0x3e094d];if(_0xd67436===0x0)continue;if(_0x3e094d+0x3<COLS&&_0xd67436===_0x78e4f8[_0x10b81b][_0x3e094d+0x1]&&_0xd67436===_0x78e4f8[_0x10b81b][_0x3e094d+0x2]&&_0xd67436===_0x78e4f8[_0x10b81b][_0x3e094d+0x3])return{'isWon':!![],'winnerPlayerId':_0xd67436};if(_0x10b81b+0x3<ROWS&&_0xd67436===_0x78e4f8[_0x10b81b+0x1][_0x3e094d]&&_0xd67436===_0x78e4f8[_0x10b81b+0x2][_0x3e094d]&&_0xd67436===_0x78e4f8[_0x10b81b+0x3][_0x3e094d])return{'isWon':!![],'winnerPlayerId':_0xd67436};if(_0x10b81b+0x3<ROWS&&_0x3e094d+0x3<COLS&&_0xd67436===_0x78e4f8[_0x10b81b+0x1][_0x3e094d+0x1]&&_0xd67436===_0x78e4f8[_0x10b81b+0x2][_0x3e094d+0x2]&&_0xd67436===_0x78e4f8[_0x10b81b+0x3][_0x3e094d+0x3])return{'isWon':!![],'winnerPlayerId':_0xd67436};if(_0x10b81b+0x3<ROWS&&_0x3e094d-0x3>=0x0&&_0xd67436===_0x78e4f8[_0x10b81b+0x1][_0x3e094d-0x1]&&_0xd67436===_0x78e4f8[_0x10b81b+0x2][_0x3e094d-0x2]&&_0xd67436===_0x78e4f8[_0x10b81b+0x3][_0x3e094d-0x3])return{'isWon':!![],'winnerPlayerId':_0xd67436};}}return{'isWon':![],'winnerPlayerId':null};}function a2_0x7ef2(_0x1514a7,_0x5dade8){const _0x3802cc=a2_0x3802();return a2_0x7ef2=function(_0x7ef2bb,_0x2bc5d3){_0x7ef2bb=_0x7ef2bb-0x159;let _0x51fe68=_0x3802cc[_0x7ef2bb];return _0x51fe68;},a2_0x7ef2(_0x1514a7,_0x5dade8);}function isDraw(_0x4b676a){const _0x2207c8=a2_0x7ef2;return _0x4b676a[_0x2207c8(0x15f)]['length']===ROWS*COLS;}function createGame(_0x4ad89e,_0xa5115c){const _0x450148=a2_0x7ef2,_0x5967cf=nextGameId(_0x4ad89e),_0x481114=_0x192c5b=>{const _0x5b59db=a2_0x7ef2;if(_0x192c5b)return _0x192c5b[_0x5b59db(0x168)]===0x1?0x2:0x1;return Math[_0x5b59db(0x161)](Math['random']()*0x2)+0x1;};return{'id':_0x5967cf,'name':_0x450148(0x162)+_0x5967cf,'initialPlayerId':_0x481114(_0xa5115c),'nextPlayerId':_0x481114(_0xa5115c),'moves':[],'snapshot':getEmptySnapshot(),'state':{'isWon':![],'isDraw':![],'winnerPlayerId':null}};}function getEmptySnapshot(){return[[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY]];}export{ROWS,COLS,createGame,canDrop,drop,canUndo,undo};