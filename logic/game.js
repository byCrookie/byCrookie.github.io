(function(_0x496951,_0x490ea1){const _0x1d07ef=a2_0x506d,_0x1fe3fc=_0x496951();while(!![]){try{const _0x540a9a=parseInt(_0x1d07ef(0x1f1))/0x1+parseInt(_0x1d07ef(0x1f4))/0x2+-parseInt(_0x1d07ef(0x1fc))/0x3*(-parseInt(_0x1d07ef(0x1e6))/0x4)+-parseInt(_0x1d07ef(0x1e9))/0x5+parseInt(_0x1d07ef(0x1f5))/0x6+-parseInt(_0x1d07ef(0x1e4))/0x7*(-parseInt(_0x1d07ef(0x1ee))/0x8)+-parseInt(_0x1d07ef(0x1ec))/0x9;if(_0x540a9a===_0x490ea1)break;else _0x1fe3fc['push'](_0x1fe3fc['shift']());}catch(_0x5aa5f0){_0x1fe3fc['push'](_0x1fe3fc['shift']());}}}(a2_0x2bf6,0x1f3ea));import{nextGameId}from'./session.js';const ROWS=0x6,COLS=0x7,EMPTY=0x0;function canUndo(_0x11afe3){const _0x37afd7=a2_0x506d;if(_0x11afe3[_0x37afd7(0x1fb)][_0x37afd7(0x1ed)]||_0x11afe3[_0x37afd7(0x1fb)][_0x37afd7(0x1fa)])return{'undo':![],'message':_0x37afd7(0x1f6)};if(_0x11afe3[_0x37afd7(0x1ef)][_0x37afd7(0x1f9)]===0x0)return{'undo':![],'message':_0x37afd7(0x1f2)};return{'undo':!![],'message':null};}function a2_0x2bf6(){const _0x6f2205=['Game\x20is\x20won!','snapshot','Not\x20your\x20turn!','pop','push','1681645qzWqum','nextPlayerId','464036HTchQH','Game\x20is\x20a\x20draw!','initialPlayerId','1275035bYbSHg','\x20column:\x20','Column\x20is\x20full','2639736DxjDUA','isWon','8EPfjWQ','moves','debug','107078evgQDV','No\x20moves\x20to\x20undo','random','199118bJuzhq','680448VmIhsn','Game\x20is\x20over','winnerPlayerId','\x20to\x20player:\x20','length','isDraw','state','3zVRzpy'];a2_0x2bf6=function(){return _0x6f2205;};return a2_0x2bf6();}function undo(_0x3c3807){const _0x3c56a0=a2_0x506d,{undo:_0x28b827,message:_0x3ec14d}=canUndo(_0x3c3807);if(!_0x28b827)throw new Error(_0x3ec14d);const _0x40b7c6=_0x3c3807[_0x3c56a0(0x1ef)][_0x3c56a0(0x1e2)](),{player:_0x4775b9,column:_0x1f7ce9}=_0x40b7c6;let _0x599329=0x0;while(_0x599329<ROWS&&_0x3c3807[_0x3c56a0(0x1e0)][_0x599329][_0x1f7ce9]===0x0){_0x599329=_0x599329+0x1;}return _0x3c3807[_0x3c56a0(0x1e0)][_0x599329][_0x1f7ce9]=EMPTY,_0x3c3807[_0x3c56a0(0x1e5)]=_0x4775b9,_0x3c3807['state']=checkGame(_0x3c3807),{'row':_0x599329,'column':_0x1f7ce9,'player':_0x4775b9};}function drop(_0x150171,_0x2a7068,_0x673cbf){const _0x36ca02=a2_0x506d,{drop:_0x42260e,message:_0x2764c5}=canDrop(_0x150171,_0x2a7068,_0x673cbf);if(!_0x42260e)throw new Error(_0x2764c5);let _0xf71140=0x0;while(_0xf71140<ROWS&&_0x150171[_0x36ca02(0x1e0)][_0xf71140][_0x673cbf]===0x0){_0xf71140=_0xf71140+0x1;}console[_0x36ca02(0x1f0)]('setting\x20row:\x20'+(_0xf71140-0x1)+_0x36ca02(0x1ea)+_0x673cbf+_0x36ca02(0x1f8)+_0x2a7068),_0x150171['snapshot'][_0xf71140-0x1][_0x673cbf]=_0x2a7068,_0x150171[_0x36ca02(0x1ef)][_0x36ca02(0x1e3)]({'player':_0x2a7068,'column':_0x673cbf}),_0x150171[_0x36ca02(0x1e5)]=_0x2a7068===0x1?0x2:0x1,_0x150171['state']=checkGame(_0x150171);}function canDrop(_0xd9579b,_0xe87e07,_0x26a2d3){const _0x162d94=a2_0x506d;if(_0xd9579b[_0x162d94(0x1fb)][_0x162d94(0x1ed)])return{'drop':![],'message':_0x162d94(0x1fd)};if(_0xd9579b[_0x162d94(0x1fb)][_0x162d94(0x1fa)])return{'drop':![],'message':_0x162d94(0x1e7)};if(_0xd9579b[_0x162d94(0x1e5)]!==_0xe87e07)return{'drop':![],'message':_0x162d94(0x1e1)};if(_0x26a2d3<0x0||_0x26a2d3>=COLS)return{'drop':![],'message':'Column\x20out\x20of\x20bounds'};if(_0xd9579b[_0x162d94(0x1e0)][0x0][_0x26a2d3]!==0x0)return{'drop':![],'message':_0x162d94(0x1eb)};return{'drop':!![],'message':null};}function checkGame(_0x2aeff5){const _0x58160c=a2_0x506d,_0x551732=checkWinner(_0x2aeff5);if(_0x551732[_0x58160c(0x1ed)])return{'isWon':!![],'isDraw':![],'winnerPlayerId':_0x551732[_0x58160c(0x1f7)]};if(isDraw(_0x2aeff5))return{'isWon':![],'isDraw':!![],'winnerPlayerId':null};return{'isWon':![],'isDraw':![],'winnerPlayerId':null};}function checkWinner(_0x221106){const _0x1c944b=a2_0x506d;let _0x41650a=_0x221106[_0x1c944b(0x1e0)];for(let _0xc51beb=0x0;_0xc51beb<ROWS;_0xc51beb++){for(let _0x5e2aee=0x0;_0x5e2aee<COLS;_0x5e2aee++){const _0x483488=_0x41650a[_0xc51beb][_0x5e2aee];if(_0x483488===0x0)continue;if(_0x5e2aee+0x3<COLS&&_0x483488===_0x41650a[_0xc51beb][_0x5e2aee+0x1]&&_0x483488===_0x41650a[_0xc51beb][_0x5e2aee+0x2]&&_0x483488===_0x41650a[_0xc51beb][_0x5e2aee+0x3])return{'isWon':!![],'winnerPlayerId':_0x483488};if(_0xc51beb+0x3<ROWS&&_0x483488===_0x41650a[_0xc51beb+0x1][_0x5e2aee]&&_0x483488===_0x41650a[_0xc51beb+0x2][_0x5e2aee]&&_0x483488===_0x41650a[_0xc51beb+0x3][_0x5e2aee])return{'isWon':!![],'winnerPlayerId':_0x483488};if(_0xc51beb+0x3<ROWS&&_0x5e2aee+0x3<COLS&&_0x483488===_0x41650a[_0xc51beb+0x1][_0x5e2aee+0x1]&&_0x483488===_0x41650a[_0xc51beb+0x2][_0x5e2aee+0x2]&&_0x483488===_0x41650a[_0xc51beb+0x3][_0x5e2aee+0x3])return{'isWon':!![],'winnerPlayerId':_0x483488};if(_0xc51beb+0x3<ROWS&&_0x5e2aee-0x3>=0x0&&_0x483488===_0x41650a[_0xc51beb+0x1][_0x5e2aee-0x1]&&_0x483488===_0x41650a[_0xc51beb+0x2][_0x5e2aee-0x2]&&_0x483488===_0x41650a[_0xc51beb+0x3][_0x5e2aee-0x3])return{'isWon':!![],'winnerPlayerId':_0x483488};}}return{'isWon':![],'winnerPlayerId':null};}function isDraw(_0x3b64f8){const _0x34853e=a2_0x506d;return _0x3b64f8[_0x34853e(0x1ef)]['length']===ROWS*COLS;}function createGame(_0x49c6db,_0x356b48){const _0x204473=nextGameId(_0x49c6db),_0x7c7378=_0x32d913=>{const _0x4bb9fe=a2_0x506d;if(_0x32d913)return _0x32d913[_0x4bb9fe(0x1e8)]===0x1?0x2:0x1;return Math['floor'](Math[_0x4bb9fe(0x1f3)]()*0x2)+0x1;};return{'id':_0x204473,'name':'Game\x20'+_0x204473,'initialPlayerId':_0x7c7378(_0x356b48),'nextPlayerId':_0x7c7378(_0x356b48),'moves':[],'snapshot':getEmptySnapshot(),'state':{'isWon':![],'isDraw':![],'winnerPlayerId':null}};}function a2_0x506d(_0x23df29,_0x5569df){const _0x2bf6cf=a2_0x2bf6();return a2_0x506d=function(_0x506da9,_0x335265){_0x506da9=_0x506da9-0x1e0;let _0x308bca=_0x2bf6cf[_0x506da9];return _0x308bca;},a2_0x506d(_0x23df29,_0x5569df);}function getEmptySnapshot(){return[[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY]];}export{ROWS,COLS,createGame,canDrop,drop,canUndo,undo};