(function(_0x5e1063,_0x3e7d90){const _0x304cdb=a2_0x39b5,_0x2cd0f2=_0x5e1063();while(!![]){try{const _0x45b947=-parseInt(_0x304cdb(0xcf))/0x1+-parseInt(_0x304cdb(0xbf))/0x2+-parseInt(_0x304cdb(0xc6))/0x3*(parseInt(_0x304cdb(0xd7))/0x4)+-parseInt(_0x304cdb(0xcc))/0x5*(parseInt(_0x304cdb(0xda))/0x6)+-parseInt(_0x304cdb(0xd9))/0x7+-parseInt(_0x304cdb(0xd1))/0x8*(parseInt(_0x304cdb(0xc3))/0x9)+parseInt(_0x304cdb(0xc7))/0xa;if(_0x45b947===_0x3e7d90)break;else _0x2cd0f2['push'](_0x2cd0f2['shift']());}catch(_0x36554a){_0x2cd0f2['push'](_0x2cd0f2['shift']());}}}(a2_0x141b,0x87b5a));import{nextGameId}from'./session.js';const ROWS=0x6,COLS=0x7,EMPTY=0x0;function a2_0x39b5(_0x3159c5,_0x4c9667){const _0x141b06=a2_0x141b();return a2_0x39b5=function(_0x39b5f5,_0x2248a1){_0x39b5f5=_0x39b5f5-0xbe;let _0x5028da=_0x141b06[_0x39b5f5];return _0x5028da;},a2_0x39b5(_0x3159c5,_0x4c9667);}function canUndo(_0x4da82f){const _0x21b89f=a2_0x39b5;if(_0x4da82f[_0x21b89f(0xca)][_0x21b89f(0xc2)]||_0x4da82f[_0x21b89f(0xca)]['isDraw'])return{'undo':![],'message':_0x21b89f(0xcd)};if(_0x4da82f['moves'][_0x21b89f(0xd8)]===0x0)return{'undo':![],'message':_0x21b89f(0xd2)};return{'undo':!![],'message':null};}function a2_0x141b(){const _0x395503=['state','debug','5685kHoOGx','Game\x20is\x20over','Game\x20','987318CQazqk','\x20to\x20player:\x20','2952jmVhEk','No\x20moves\x20to\x20undo','random','Game\x20is\x20won!','setting\x20row:\x20','snapshot','800804AcrFmF','length','5428570XFvwkD','1950urzOHd','initialPlayerId','nextPlayerId','pop','Column\x20out\x20of\x20bounds','112160xSvToV','moves','push','isWon','17235PcvQCE','Column\x20is\x20full','floor','15YHZsTZ','44519390XDpSeH','isDraw','Game\x20is\x20a\x20draw!'];a2_0x141b=function(){return _0x395503;};return a2_0x141b();}function undo(_0x5526f7){const _0x3436eb=a2_0x39b5,{undo:_0x2f876b,message:_0x59d43b}=canUndo(_0x5526f7);if(!_0x2f876b)throw new Error(_0x59d43b);const _0x3e8539=_0x5526f7[_0x3436eb(0xc0)][_0x3436eb(0xdd)](),{player:_0x1bbbee,column:_0x308877}=_0x3e8539;let _0x25d1b5=0x0;while(_0x25d1b5<ROWS&&_0x5526f7[_0x3436eb(0xd6)][_0x25d1b5][_0x308877]===0x0){_0x25d1b5=_0x25d1b5+0x1;}return _0x5526f7['snapshot'][_0x25d1b5][_0x308877]=EMPTY,_0x5526f7[_0x3436eb(0xdc)]=_0x1bbbee,_0x5526f7[_0x3436eb(0xca)]=checkGame(_0x5526f7),{'row':_0x25d1b5,'column':_0x308877,'player':_0x1bbbee};}function drop(_0x4178fd,_0x1060cc,_0x2c63f2){const _0x378b7b=a2_0x39b5,{drop:_0x36fba9,message:_0x313e09}=canDrop(_0x4178fd,_0x1060cc,_0x2c63f2);if(!_0x36fba9)throw new Error(_0x313e09);let _0x3d94f2=0x0;while(_0x3d94f2<ROWS&&_0x4178fd[_0x378b7b(0xd6)][_0x3d94f2][_0x2c63f2]===0x0){_0x3d94f2=_0x3d94f2+0x1;}console[_0x378b7b(0xcb)](_0x378b7b(0xd5)+(_0x3d94f2-0x1)+'\x20column:\x20'+_0x2c63f2+_0x378b7b(0xd0)+_0x1060cc),_0x4178fd[_0x378b7b(0xd6)][_0x3d94f2-0x1][_0x2c63f2]=_0x1060cc,_0x4178fd[_0x378b7b(0xc0)][_0x378b7b(0xc1)]({'player':_0x1060cc,'column':_0x2c63f2}),_0x4178fd[_0x378b7b(0xdc)]=_0x1060cc===0x1?0x2:0x1,_0x4178fd['state']=checkGame(_0x4178fd);}function canDrop(_0x541731,_0x4f5f43,_0x46ee41){const _0x1afd31=a2_0x39b5;if(_0x541731[_0x1afd31(0xca)]['isWon'])return{'drop':![],'message':_0x1afd31(0xd4)};if(_0x541731[_0x1afd31(0xca)][_0x1afd31(0xc8)])return{'drop':![],'message':_0x1afd31(0xc9)};if(_0x541731[_0x1afd31(0xdc)]!==_0x4f5f43)return{'drop':![],'message':'Not\x20your\x20turn!'};if(_0x46ee41<0x0||_0x46ee41>=COLS)return{'drop':![],'message':_0x1afd31(0xbe)};if(_0x541731[_0x1afd31(0xd6)][0x0][_0x46ee41]!==0x0)return{'drop':![],'message':_0x1afd31(0xc4)};return{'drop':!![],'message':null};}function checkGame(_0x4467d9){const _0x4cb01a=a2_0x39b5,_0x19e4a8=checkWinner(_0x4467d9);if(_0x19e4a8[_0x4cb01a(0xc2)])return{'isWon':!![],'isDraw':![],'winnerPlayerId':_0x19e4a8['winnerPlayerId']};if(isDraw(_0x4467d9))return{'isWon':![],'isDraw':!![],'winnerPlayerId':null};return{'isWon':![],'isDraw':![],'winnerPlayerId':null};}function checkWinner(_0x2ed4df){const _0x15e660=a2_0x39b5;let _0x13c774=_0x2ed4df[_0x15e660(0xd6)];for(let _0x33e935=0x0;_0x33e935<ROWS;_0x33e935++){for(let _0x3ddffe=0x0;_0x3ddffe<COLS;_0x3ddffe++){const _0x131c8b=_0x13c774[_0x33e935][_0x3ddffe];if(_0x131c8b===0x0)continue;if(_0x3ddffe+0x3<COLS&&_0x131c8b===_0x13c774[_0x33e935][_0x3ddffe+0x1]&&_0x131c8b===_0x13c774[_0x33e935][_0x3ddffe+0x2]&&_0x131c8b===_0x13c774[_0x33e935][_0x3ddffe+0x3])return{'isWon':!![],'winnerPlayerId':_0x131c8b};if(_0x33e935+0x3<ROWS&&_0x131c8b===_0x13c774[_0x33e935+0x1][_0x3ddffe]&&_0x131c8b===_0x13c774[_0x33e935+0x2][_0x3ddffe]&&_0x131c8b===_0x13c774[_0x33e935+0x3][_0x3ddffe])return{'isWon':!![],'winnerPlayerId':_0x131c8b};if(_0x33e935+0x3<ROWS&&_0x3ddffe+0x3<COLS&&_0x131c8b===_0x13c774[_0x33e935+0x1][_0x3ddffe+0x1]&&_0x131c8b===_0x13c774[_0x33e935+0x2][_0x3ddffe+0x2]&&_0x131c8b===_0x13c774[_0x33e935+0x3][_0x3ddffe+0x3])return{'isWon':!![],'winnerPlayerId':_0x131c8b};if(_0x33e935+0x3<ROWS&&_0x3ddffe-0x3>=0x0&&_0x131c8b===_0x13c774[_0x33e935+0x1][_0x3ddffe-0x1]&&_0x131c8b===_0x13c774[_0x33e935+0x2][_0x3ddffe-0x2]&&_0x131c8b===_0x13c774[_0x33e935+0x3][_0x3ddffe-0x3])return{'isWon':!![],'winnerPlayerId':_0x131c8b};}}return{'isWon':![],'winnerPlayerId':null};}function isDraw(_0x29b2be){const _0x284c2f=a2_0x39b5;return _0x29b2be[_0x284c2f(0xc0)][_0x284c2f(0xd8)]===ROWS*COLS;}function createGame(_0x1c16db,_0x5c0c2d){const _0x562a15=a2_0x39b5,_0x258dc8=nextGameId(_0x1c16db),_0x218ce8=_0x12ac7a=>{const _0x19c495=a2_0x39b5;if(_0x12ac7a)return _0x12ac7a[_0x19c495(0xdb)]===0x1?0x2:0x1;return Math[_0x19c495(0xc5)](Math[_0x19c495(0xd3)]()*0x2)+0x1;};return{'id':_0x258dc8,'name':_0x562a15(0xce)+_0x258dc8,'initialPlayerId':_0x218ce8(_0x5c0c2d),'nextPlayerId':_0x218ce8(_0x5c0c2d),'moves':[],'snapshot':getEmptySnapshot(),'state':{'isWon':![],'isDraw':![],'winnerPlayerId':null}};}function getEmptySnapshot(){return[[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY]];}export{ROWS,COLS,createGame,canDrop,drop,canUndo,undo};