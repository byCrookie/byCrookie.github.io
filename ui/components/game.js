const a6_0x3fd4aa=a6_0x2828;(function(_0x2c7bd7,_0x44299c){const _0x34ae50=a6_0x2828,_0x381710=_0x2c7bd7();while(!![]){try{const _0x2371db=parseInt(_0x34ae50(0xcb))/0x1+parseInt(_0x34ae50(0xa4))/0x2*(-parseInt(_0x34ae50(0xa6))/0x3)+parseInt(_0x34ae50(0xe0))/0x4+-parseInt(_0x34ae50(0xab))/0x5*(-parseInt(_0x34ae50(0xb9))/0x6)+parseInt(_0x34ae50(0x95))/0x7*(parseInt(_0x34ae50(0xd0))/0x8)+parseInt(_0x34ae50(0xc4))/0x9*(parseInt(_0x34ae50(0xa5))/0xa)+-parseInt(_0x34ae50(0xd9))/0xb;if(_0x2371db===_0x44299c)break;else _0x381710['push'](_0x381710['shift']());}catch(_0x3cc7dc){_0x381710['push'](_0x381710['shift']());}}}(a6_0x51c6,0x68766));import{route,replaceContentById,clearContent,createSvgElement,addClick,getElementById}from'../ui.js';import{addGame,getSessionById,hasSessionById,loadState,saveState}from'../../logic/state.js';import{getGameById,getPlayerById,getScore,hasGameById}from'../../logic/session.js';import{canDrop,COLS,createGame,ROWS}from'../../logic/game.js';import*as a6_0x4aeece from'../../logic/game.js';const svgId=a6_0x3fd4aa(0xb4),bannerId=a6_0x3fd4aa(0xbb),player1ScoreId='player1-score',player2ScoreId='player2-score',player1ScoreNameId='player1-score-name',player2ScoreNameId=a6_0x3fd4aa(0x9f),undoId=a6_0x3fd4aa(0x98),circleRadius=0x14,spacing=0x1e,boardColor=a6_0x3fd4aa(0xd6),emptyColor=a6_0x3fd4aa(0xac),maskVisible=a6_0x3fd4aa(0xac),maskInvisible=a6_0x3fd4aa(0xa2),transparentColor=a6_0x3fd4aa(0xb0);let is_animation_playing=![];function gameComponent(){return{'html':html,'execute':execute};}function html(){const _0x3b32b7=a6_0x3fd4aa;return _0x3b32b7(0xb1)+bannerId+_0x3b32b7(0xe1)+player1ScoreNameId+_0x3b32b7(0xdf)+player1ScoreId+_0x3b32b7(0xc2)+player2ScoreNameId+_0x3b32b7(0xe2)+player2ScoreId+_0x3b32b7(0xb5)+svgId+_0x3b32b7(0x96)+undoId+_0x3b32b7(0xa3);}function execute(_0x143e54){const _0x42a507=a6_0x3fd4aa,{sessionId:_0x46a8da,gameId:_0x362ce5}=_0x143e54,_0x415fc2=loadState();if(!hasSessionById(_0x415fc2,_0x46a8da)){console[_0x42a507(0xce)]('Session\x20with\x20id\x20'+_0x46a8da+_0x42a507(0x9a)),route(_0x42a507(0xd1),{},!![]);return;}const _0x3f43ca=getSessionById(_0x415fc2,_0x46a8da);if(!hasGameById(_0x3f43ca,_0x362ce5)){console[_0x42a507(0xce)]('Game\x20with\x20id\x20'+_0x362ce5+_0x42a507(0xc6)+_0x46a8da),route('session',{'sessionId':_0x46a8da},!![]);return;}const _0x5bba84=getGameById(_0x3f43ca,_0x362ce5),_0x59beac=getPlayerById(_0x3f43ca,_0x5bba84[_0x42a507(0xbc)]);replaceContentById(bannerId,getBannerText(_0x3f43ca,_0x5bba84,_0x59beac)),updateScore(_0x3f43ca);const {circles:_0x25d7de,dropper:_0x543281,clickableCircles:_0x495243,svg:_0x233d27}=createSvg(_0x46a8da,_0x362ce5),_0x374cd9=document[_0x42a507(0xd8)]('connect-four');clearContent(_0x374cd9),_0x374cd9[_0x42a507(0xaf)](_0x233d27);let _0x51b1e7=0x12c;for(let _0x3a317e=0x0;_0x3a317e<_0x5bba84[_0x42a507(0xad)][_0x42a507(0xa7)];_0x3a317e++){const _0x10d86b=_0x5bba84[_0x42a507(0xad)][_0x3a317e];is_animation_playing=!![];const _0x24ef7a=getPlayerById(_0x3f43ca,_0x10d86b[_0x42a507(0xdd)]);console[_0x42a507(0x9e)](_0x42a507(0xd3)+_0x10d86b[_0x42a507(0xdd)]+_0x42a507(0xb8)+_0x10d86b['column']),dropCircle(_0x25d7de,_0x543281,_0x10d86b[_0x42a507(0xa1)],_0x24ef7a[_0x42a507(0xa9)],_0x51b1e7,_0x3a317e*(_0x51b1e7/0x2),()=>{const _0x1a1f97=_0x42a507;_0x3a317e===_0x5bba84[_0x1a1f97(0xad)][_0x1a1f97(0xa7)]-0x1&&(is_animation_playing=![]);});}addClick(undoId,()=>{const _0x400e61=_0x42a507;if(!is_animation_playing){const _0x117e95=loadState(),_0x56bb4a=getSessionById(_0x117e95,_0x46a8da),_0x2b395f=getGameById(_0x56bb4a,_0x362ce5),{undo:_0x5da1b6,message:_0x319cac}=a6_0x4aeece['canUndo'](_0x2b395f);if(_0x5da1b6){is_animation_playing=!![];const _0x385815=a6_0x4aeece[_0x400e61(0x98)](_0x2b395f);saveState(_0x117e95),updateScore(_0x56bb4a);const _0x45fdcd=getPlayerById(_0x56bb4a,_0x385815[_0x400e61(0xdd)]);replaceContentById(bannerId,getBannerText(_0x56bb4a,_0x2b395f,_0x45fdcd));const _0x131d78=_0x25d7de[_0x385815['row']][_0x385815[_0x400e61(0xa1)]];_0x543281[_0x400e61(0xa8)](_0x131d78);const {cx:_0x4766d4,cy:_0x496141}=calcCirclePosition(_0x385815[_0x400e61(0xc5)],_0x385815['column']),_0x5e07af=createCircle(_0x4766d4,_0x496141,circleRadius,transparentColor);_0x5e07af[_0x400e61(0xbe)]=()=>dropClick(_0x385815['row'],_0x385815[_0x400e61(0xa1)],_0x46a8da,_0x362ce5,_0x25d7de,_0x543281),_0x495243[_0x400e61(0xaf)](_0x5e07af),_0x25d7de[_0x385815[_0x400e61(0xc5)]][_0x385815[_0x400e61(0xa1)]]=_0x5e07af,is_animation_playing=![];}else console['warn'](_0x400e61(0xdc)+_0x319cac);}else console[_0x400e61(0xce)](_0x400e61(0xba));});}function a6_0x2828(_0x574f42,_0x4b1f49){const _0x51c696=a6_0x51c6();return a6_0x2828=function(_0x2828a2,_0x58fb8e){_0x2828a2=_0x2828a2-0x92;let _0x5917c5=_0x51c696[_0x2828a2];return _0x5917c5;},a6_0x2828(_0x574f42,_0x4b1f49);}function getBannerText(_0x556c5c,_0xfd089b,_0xfc3665){const _0x1b4ecb=a6_0x3fd4aa;if(_0xfd089b[_0x1b4ecb(0xdb)][_0x1b4ecb(0xcc)]){const _0x107112=getPlayerById(_0x556c5c,_0xfd089b[_0x1b4ecb(0xdb)]['winnerPlayerId']);return _0x107112[_0x1b4ecb(0xbf)]+_0x1b4ecb(0xcf);}if(_0xfd089b[_0x1b4ecb(0xdb)][_0x1b4ecb(0xaa)])return _0x1b4ecb(0x97);return _0x1b4ecb(0xb7)+_0xfc3665['name']+'!';}function createSvg(_0x5ac05c,_0x15a3c8){const _0x358824=a6_0x3fd4aa,_0x15b3b5=COLS*(circleRadius*0x2+spacing)-spacing,_0xec6ade=ROWS*(circleRadius*0x2+spacing)-spacing,_0x2f7564=createSvgElement(_0x358824(0xc1),{'width':_0x15b3b5[_0x358824(0x99)](),'height':_0xec6ade['toString'](),'viewBox':_0x358824(0x94)+_0x15b3b5+'\x20'+_0xec6ade}),_0x168c9a=createSvgElement('rect',{'width':_0x358824(0xc7),'height':'100%','fill':emptyColor});_0x2f7564[_0x358824(0xaf)](_0x168c9a);const _0xebc50c=createSvgElement(_0x358824(0xb3),{'id':_0x358824(0xcd)}),_0x2e617b=createSvgElement('rect',{'width':_0x15b3b5[_0x358824(0x99)](),'height':_0xec6ade[_0x358824(0x99)](),'fill':maskVisible});_0xebc50c['appendChild'](_0x2e617b);for(let _0x53f3f6=0x0;_0x53f3f6<ROWS;_0x53f3f6++){for(let _0x1d97fd=0x0;_0x1d97fd<COLS;_0x1d97fd++){const {cx:_0x411e66,cy:_0x547441}=calcCirclePosition(_0x53f3f6,_0x1d97fd),_0x8bdef7=createCircle(_0x411e66,_0x547441,circleRadius,maskInvisible,0x1);_0xebc50c[_0x358824(0xaf)](_0x8bdef7);}}_0x2f7564[_0x358824(0xaf)](_0xebc50c);const _0x1fe86f=createSvgElement('g',{});_0x2f7564[_0x358824(0xaf)](_0x1fe86f);const _0x454db8=createSvgElement(_0x358824(0xc9),{'width':_0x15b3b5[_0x358824(0x99)](),'height':_0xec6ade['toString'](),'fill':boardColor,'mask':'url(#circle-mask)'});_0x2f7564[_0x358824(0xaf)](_0x454db8);const _0xb41049=createSvgElement('g',{});_0x2f7564[_0x358824(0xaf)](_0xb41049);let _0x4b5c73=[];for(let _0x4867f6=0x0;_0x4867f6<ROWS;_0x4867f6++){for(let _0x3b47c1=0x0;_0x3b47c1<COLS;_0x3b47c1++){const {cx:_0x5e87dd,cy:_0x4caf9c}=calcCirclePosition(_0x4867f6,_0x3b47c1),_0x8db508=createCircle(_0x5e87dd,_0x4caf9c,circleRadius,transparentColor);_0x8db508['onclick']=()=>dropClick(_0x4867f6,_0x3b47c1,_0x5ac05c,_0x15a3c8,_0x4b5c73,_0x1fe86f),_0xb41049['appendChild'](_0x8db508),!_0x4b5c73[_0x4867f6]&&(_0x4b5c73[_0x4867f6]=[]),_0x4b5c73[_0x4867f6][_0x3b47c1]=_0x8db508;}}return{'circles':_0x4b5c73,'dropper':_0x1fe86f,'clickableCircles':_0xb41049,'svg':_0x2f7564};}function dropClick(_0x30bd1d,_0x3bb356,_0x4d2cfa,_0x35bae4,_0x1446aa,_0x56c18d){const _0x5b18c2=a6_0x3fd4aa;console[_0x5b18c2(0x9e)](_0x5b18c2(0xae)+_0x30bd1d+',\x20col\x20'+_0x3bb356);if(!is_animation_playing){const _0x52fa54=loadState(),_0x3d0ccb=getSessionById(_0x52fa54,_0x4d2cfa),_0x1c664c=getGameById(_0x3d0ccb,_0x35bae4),{drop:_0x5e0156,message:_0x319048}=canDrop(_0x1c664c,_0x1c664c[_0x5b18c2(0xbc)],_0x3bb356);if(_0x5e0156){is_animation_playing=!![];const _0x58008d=getPlayerById(_0x3d0ccb,_0x1c664c['nextPlayerId']);a6_0x4aeece[_0x5b18c2(0xd4)](_0x1c664c,_0x58008d['id'],_0x3bb356),saveState(_0x52fa54),dropCircle(_0x1446aa,_0x56c18d,_0x3bb356,_0x58008d['color'],0x1f4,0x0,()=>{const _0x357152=_0x5b18c2,_0x39b5ed=getPlayerById(_0x3d0ccb,_0x1c664c[_0x357152(0xbc)]);updateScore(_0x3d0ccb);const _0x5962d7=getBannerText(_0x3d0ccb,_0x1c664c,_0x39b5ed);replaceContentById(bannerId,_0x5962d7);const {isWon:_0x591c30,isDraw:_0x129712}=_0x1c664c[_0x357152(0xdb)];if(_0x591c30||_0x129712){const _0x883561=createGame(_0x3d0ccb,_0x1c664c);addGame(_0x3d0ccb,_0x883561),saveState(_0x52fa54),alert(_0x5962d7),route(_0x357152(0xc8),{'sessionId':_0x4d2cfa,'gameId':_0x883561['id']},!![]);}is_animation_playing=![];});}else console[_0x5b18c2(0xce)](_0x5b18c2(0x9c)+_0x319048);}else console['warn'](_0x5b18c2(0xc0));}function dropCircle(_0x58dd43,_0x5b331d,_0x447bd1,_0x2e1f9a,_0x5ab8e9,_0x4033fc,_0x5cafff){const _0x2c155f=a6_0x3fd4aa;console[_0x2c155f(0x9e)](_0x2c155f(0x9d)+_0x447bd1);for(let _0x3d418d=ROWS-0x1;_0x3d418d>=0x0;_0x3d418d--){if(_0x58dd43[_0x3d418d][_0x447bd1]['getAttribute']('fill')===transparentColor){console[_0x2c155f(0x9e)](_0x2c155f(0xda)+_0x3d418d+',\x20col\x20'+_0x447bd1);const _0x2f1c53=_0x58dd43[_0x3d418d][_0x447bd1],_0x43a916=_0x2f1c53[_0x2c155f(0x92)]('cx'),_0x548683=_0x2f1c53[_0x2c155f(0x92)]('cy');_0x2f1c53[_0x2c155f(0xc3)]();const _0x3ad78a=createCircle(_0x43a916,circleRadius,circleRadius+0x1,_0x2e1f9a);_0x3ad78a[_0x2c155f(0x9b)](_0x2c155f(0xbd),'0'),_0x5b331d[_0x2c155f(0xaf)](_0x3ad78a),_0x58dd43[_0x3d418d][_0x447bd1]=_0x3ad78a;const _0x5f4dcc=_0x3ad78a[_0x2c155f(0xb2)]([{'cy':circleRadius+'px','opacity':0x1},{'cy':_0x548683+'px','opacity':0x1}],{'duration':_0x5ab8e9,'delay':_0x4033fc,'fill':_0x2c155f(0xde),'easing':_0x2c155f(0xa0)});_0x5f4dcc[_0x2c155f(0xb6)]=_0x5cafff;return;}}console[_0x2c155f(0xce)](_0x2c155f(0xd2)+_0x447bd1+_0x2c155f(0x93));}function calcCirclePosition(_0x15fc1a,_0x55b37a){const _0x550dac=_0x55b37a*(circleRadius*0x2+spacing)+circleRadius,_0x3110c0=_0x15fc1a*(circleRadius*0x2+spacing)+circleRadius;return{'cx':_0x550dac,'cy':_0x3110c0};}function createCircle(_0x588641,_0x562bc8,_0x2d4ede,_0x1ad89a,..._0x485e31){const _0xa02d99=a6_0x3fd4aa;return createSvgElement(_0xa02d99(0xd5),{'cx':_0x588641[_0xa02d99(0x99)](),'cy':_0x562bc8[_0xa02d99(0x99)](),'r':_0x2d4ede['toString'](),'fill':_0x1ad89a},..._0x485e31);}function updateScore(_0x6e47d7){const _0x2921b2=a6_0x3fd4aa,{player1:_0x560347,player2:_0x5c2f50}=getScore(_0x6e47d7);replaceContentById(player1ScoreNameId,_0x6e47d7[_0x2921b2(0xd7)][0x0][_0x2921b2(0xbf)]),replaceContentById(player2ScoreNameId,_0x6e47d7[_0x2921b2(0xd7)][0x1][_0x2921b2(0xbf)]),replaceContentById(player1ScoreId,_0x560347['toString']()),replaceContentById(player2ScoreId,_0x5c2f50[_0x2921b2(0x99)]()),getElementById(player1ScoreId)[_0x2921b2(0xca)][_0x2921b2(0xa9)]=_0x6e47d7['players'][0x0][_0x2921b2(0xa9)],getElementById(player2ScoreId)[_0x2921b2(0xca)]['color']=_0x6e47d7[_0x2921b2(0xd7)][0x1][_0x2921b2(0xa9)],getElementById(player1ScoreNameId)[_0x2921b2(0xca)][_0x2921b2(0xa9)]=_0x6e47d7[_0x2921b2(0xd7)][0x0][_0x2921b2(0xa9)],getElementById(player2ScoreNameId)[_0x2921b2(0xca)][_0x2921b2(0xa9)]=_0x6e47d7['players'][0x1]['color'];}export{gameComponent};function a6_0x51c6(){const _0x5adf76=['moves','Clicked\x20on\x20row\x20','appendChild','transparent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-center\x22>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-zinc-800/50\x20border\x20border-zinc-700\x20rounded-lg\x20p-6\x20mb-8\x20w-full\x20max-w-md\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','animate','mask','connect-four','\x22\x20class=\x22text-3xl\x20font-bold\x22>0</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','onfinish','Your\x20turn\x20','\x20in\x20column\x20','838788msqxEm','Animation\x20is\x20playing,\x20can\x20not\x20undo\x20move','banner','nextPlayerId','opacity','onclick','name','Animation\x20is\x20playing,\x20can\x20not\x20drop\x20circle','svg','\x22\x20class=\x22text-3xl\x20font-bold\x22>0</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20text-zinc-500\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20mb-2\x22>vs</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x22>:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','remove','9VfcVKN','row','\x20not\x20found,\x20redirecting\x20to\x20session\x20','100%','game','rect','style','459707lMitmF','isWon','circle-mask','warn','\x20won!','50368VjlrBc','sessions','Column\x20','Replaying\x20move:\x20player\x20','drop','circle','#18181B','players','getElementById','16574712yrxCYU','Dropping\x20circle\x20to\x20row\x20','state','Can\x20not\x20undo:\x20','player','forwards','\x22\x20class=\x22text-zinc-400\x20text-lg\x20mb-2\x22>Player\x201</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','1625004wEpyLL','\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-center\x20items-center\x20gap-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','\x22\x20class=\x22text-zinc-400\x20text-lg\x20mb-2\x22>Player\x202</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','getAttribute','\x20is\x20full','0\x200\x20','259uwfYmq','\x22\x20class=\x22flex\x20justify-center\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-center\x20mt-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22','Draw!','undo','toString','\x20not\x20found,\x20redirecting\x20to\x20sessions','setAttribute','Can\x20not\x20drop:\x20','Dropping\x20circle\x20in\x20column\x20','debug','player2-score-name','cubic-bezier(0.645,\x200.045,\x200.355,\x201.000)','column','black','\x22\x20class=\x22px-4\x20pt-2\x20pb-3\x20bg-blue-500\x20text-white\x20font-semibold\x20rounded-lg\x20hover:bg-blue-600\x20focus:outline-none\x22>Undo</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','74886PyBaDM','7334050SRpyTk','3HtTkeC','length','removeChild','color','isDraw','5FrJPsM','white'];a6_0x51c6=function(){return _0x5adf76;};return a6_0x51c6();}