const a6_0x345053=a6_0x18f6;(function(_0x3d9fc8,_0x1a8bcf){const _0xa9d482=a6_0x18f6,_0x158158=_0x3d9fc8();while(!![]){try{const _0x5ac794=-parseInt(_0xa9d482(0x9f))/0x1+-parseInt(_0xa9d482(0xa4))/0x2*(parseInt(_0xa9d482(0xb5))/0x3)+-parseInt(_0xa9d482(0xc1))/0x4*(-parseInt(_0xa9d482(0xaf))/0x5)+-parseInt(_0xa9d482(0xbe))/0x6+-parseInt(_0xa9d482(0x98))/0x7*(parseInt(_0xa9d482(0xc3))/0x8)+parseInt(_0xa9d482(0xb6))/0x9+parseInt(_0xa9d482(0x9b))/0xa;if(_0x5ac794===_0x1a8bcf)break;else _0x158158['push'](_0x158158['shift']());}catch(_0x5ec724){_0x158158['push'](_0x158158['shift']());}}}(a6_0xa4f7,0x9beaf));import{route,replaceContentById,clearContent,createSvgElement,addClick,getElementById}from'../ui.js';import{addGame,getSessionById,hasSessionById,loadState,saveState}from'../../logic/state.js';import{getGameById,getPlayerById,getScore,hasGameById}from'../../logic/session.js';import{canDrop,COLS,createGame,ROWS}from'../../logic/game.js';import*as a6_0x46aa14 from'../../logic/game.js';const svgId=a6_0x345053(0xd4),bannerId='banner',player1ScoreId=a6_0x345053(0xc0),player2ScoreId=a6_0x345053(0x9e),player1ScoreNameId=a6_0x345053(0xd8),player2ScoreNameId=a6_0x345053(0xcd),undoId=a6_0x345053(0xce),circleRadius=0x14,spacing=0x1e,boardColor=a6_0x345053(0xc2),emptyColor=a6_0x345053(0xc8),maskVisible=a6_0x345053(0xc8),maskInvisible=a6_0x345053(0xa2),transparentColor=a6_0x345053(0xc4);function a6_0xa4f7(){const _0x49ca73=['getAttribute','connect-four','\x22\x20class=\x22text-3xl\x20font-bold\x22>0</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20text-zinc-500\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20mb-2\x22>vs</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x22>:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','\x20is\x20full','column','player1-score-name','Draw!','removeChild','\x22\x20class=\x22text-zinc-400\x20text-lg\x20mb-2\x22>Player\x201</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','color','remove','\x20not\x20found,\x20redirecting\x20to\x20sessions','length','cubic-bezier(0.645,\x200.045,\x200.355,\x201.000)','\x20won!','\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-center\x20items-center\x20gap-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','Your\x20turn\x20','301ywRtJd','animate','toString','35527630DWsCfg','Animation\x20is\x20playing,\x20can\x20not\x20drop\x20circle','\x22\x20class=\x22text-zinc-400\x20text-lg\x20mb-2\x22>Player\x202</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','player2-score','959190gdfvjq','name','Dropping\x20circle\x20in\x20column\x20','black','Column\x20','12608NIIELo','\x20not\x20found,\x20redirecting\x20to\x20session\x20','onclick','style','url(#circle-mask)','canUndo','Clicked\x20on\x20row\x20','warn','100%','appendChild','Can\x20not\x20drop:\x20','45AOhdmF','circle-mask','nextPlayerId','Animation\x20is\x20playing,\x20can\x20not\x20undo\x20move','\x20in\x20column\x20','moves','480mbwlVv','166005UdCGvR','Dropping\x20circle\x20to\x20row\x20','Game\x20with\x20id\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-center\x22>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-zinc-800/50\x20border\x20border-zinc-700\x20rounded-lg\x20p-6\x20mb-8\x20w-full\x20max-w-md\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','row','player','svg','mask','4617642yfjfxx','rect','player1-score','174772sRrysJ','#18181B','109464rwAZBW','transparent','circle','fill','players','white','debug','0\x200\x20','onfinish','sessions','player2-score-name','undo','state','\x22\x20class=\x22text-3xl\x20font-bold\x22>0</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','Can\x20not\x20undo:\x20',',\x20col\x20'];a6_0xa4f7=function(){return _0x49ca73;};return a6_0xa4f7();}let is_animation_playing=![];function a6_0x18f6(_0x17a5ab,_0xe25059){const _0xa4f7c5=a6_0xa4f7();return a6_0x18f6=function(_0x18f6f9,_0x3ea888){_0x18f6f9=_0x18f6f9-0x94;let _0x53335d=_0xa4f7c5[_0x18f6f9];return _0x53335d;},a6_0x18f6(_0x17a5ab,_0xe25059);}function gameComponent(){return{'html':html,'execute':execute};}function html(){const _0x2880b1=a6_0x345053;return _0x2880b1(0xb9)+bannerId+_0x2880b1(0x96)+player1ScoreNameId+_0x2880b1(0xdb)+player1ScoreId+_0x2880b1(0xd5)+player2ScoreNameId+_0x2880b1(0x9d)+player2ScoreId+_0x2880b1(0xd0)+svgId+'\x22\x20class=\x22flex\x20justify-center\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-center\x20mt-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22'+undoId+'\x22\x20class=\x22px-4\x20pt-2\x20pb-3\x20bg-blue-500\x20text-white\x20font-semibold\x20rounded-lg\x20hover:bg-blue-600\x20focus:outline-none\x22>Undo</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';}function execute(_0x4d3913){const _0x405d2d=a6_0x345053,{sessionId:_0x43c7af,gameId:_0x3303ad}=_0x4d3913,_0x365ce9=loadState();if(!hasSessionById(_0x365ce9,_0x43c7af)){console[_0x405d2d(0xab)]('Session\x20with\x20id\x20'+_0x43c7af+_0x405d2d(0xde)),route(_0x405d2d(0xcc),{},!![]);return;}const _0x30b052=getSessionById(_0x365ce9,_0x43c7af);if(!hasGameById(_0x30b052,_0x3303ad)){console['warn'](_0x405d2d(0xb8)+_0x3303ad+_0x405d2d(0xa5)+_0x43c7af),route('session',{'sessionId':_0x43c7af},!![]);return;}const _0x4609c9=getGameById(_0x30b052,_0x3303ad),_0x223a36=getPlayerById(_0x30b052,_0x4609c9['nextPlayerId']);replaceContentById(bannerId,getBannerText(_0x30b052,_0x4609c9,_0x223a36)),updateScore(_0x30b052);const {circles:_0x1f0d41,dropper:_0x27039e,clickableCircles:_0xc4c168,svg:_0x2f9856}=createSvg(_0x43c7af,_0x3303ad),_0x539e16=document['getElementById'](_0x405d2d(0xd4));clearContent(_0x539e16),_0x539e16[_0x405d2d(0xad)](_0x2f9856);let _0x4d3006=0x12c;for(let _0x8a5344=0x0;_0x8a5344<_0x4609c9[_0x405d2d(0xb4)][_0x405d2d(0xdf)];_0x8a5344++){const _0x1e315c=_0x4609c9[_0x405d2d(0xb4)][_0x8a5344];is_animation_playing=!![];const _0x193421=getPlayerById(_0x30b052,_0x1e315c['player']);console[_0x405d2d(0xc9)]('Replaying\x20move:\x20player\x20'+_0x1e315c[_0x405d2d(0xbb)]+_0x405d2d(0xb3)+_0x1e315c['column']),dropCircle(_0x1f0d41,_0x27039e,_0x1e315c[_0x405d2d(0xd7)],_0x193421[_0x405d2d(0xdc)],_0x4d3006,_0x8a5344*(_0x4d3006/0x2),()=>{_0x8a5344===_0x4609c9['moves']['length']-0x1&&(is_animation_playing=![]);});}addClick(undoId,()=>{const _0x513b1d=_0x405d2d;if(!is_animation_playing){const _0x5b9535=loadState(),_0x40c2f4=getSessionById(_0x5b9535,_0x43c7af),_0x2d6ada=getGameById(_0x40c2f4,_0x3303ad),{undo:_0x6c3ee2,message:_0x273abe}=a6_0x46aa14[_0x513b1d(0xa9)](_0x2d6ada);if(_0x6c3ee2){is_animation_playing=!![];const _0x5e0b00=a6_0x46aa14['undo'](_0x2d6ada);saveState(_0x5b9535),updateScore(_0x40c2f4);const _0x30f847=getPlayerById(_0x40c2f4,_0x5e0b00['player']);replaceContentById(bannerId,getBannerText(_0x40c2f4,_0x2d6ada,_0x30f847));const _0x5a001b=_0x1f0d41[_0x5e0b00[_0x513b1d(0xba)]][_0x5e0b00[_0x513b1d(0xd7)]];_0x27039e[_0x513b1d(0xda)](_0x5a001b);const {cx:_0x51e2b7,cy:_0x30ccd7}=calcCirclePosition(_0x5e0b00[_0x513b1d(0xba)],_0x5e0b00[_0x513b1d(0xd7)]),_0x636447=createCircle(_0x51e2b7,_0x30ccd7,circleRadius,transparentColor);_0x636447['onclick']=()=>dropClick(_0x5e0b00[_0x513b1d(0xba)],_0x5e0b00[_0x513b1d(0xd7)],_0x43c7af,_0x3303ad,_0x1f0d41,_0x27039e),_0xc4c168[_0x513b1d(0xad)](_0x636447),_0x1f0d41[_0x5e0b00[_0x513b1d(0xba)]][_0x5e0b00[_0x513b1d(0xd7)]]=_0x636447,is_animation_playing=![];}else console[_0x513b1d(0xab)](_0x513b1d(0xd1)+_0x273abe);}else console['warn'](_0x513b1d(0xb2));});}function getBannerText(_0x3be6d9,_0x553c6e,_0x38db64){const _0x1f6af8=a6_0x345053;if(_0x553c6e[_0x1f6af8(0xcf)]['isWon']){const _0x820e07=getPlayerById(_0x3be6d9,_0x553c6e[_0x1f6af8(0xcf)]['winnerPlayerId']);return _0x820e07['name']+_0x1f6af8(0x95);}if(_0x553c6e[_0x1f6af8(0xcf)]['isDraw'])return _0x1f6af8(0xd9);return _0x1f6af8(0x97)+_0x38db64['name']+'!';}function createSvg(_0x2f82d0,_0x23fc2b){const _0x536955=a6_0x345053,_0x216156=COLS*(circleRadius*0x2+spacing)-spacing,_0x7ecb79=ROWS*(circleRadius*0x2+spacing)-spacing,_0x4827e6=createSvgElement(_0x536955(0xbc),{'width':_0x216156['toString'](),'height':_0x7ecb79[_0x536955(0x9a)](),'viewBox':_0x536955(0xca)+_0x216156+'\x20'+_0x7ecb79}),_0x4dc357=createSvgElement(_0x536955(0xbf),{'width':'100%','height':_0x536955(0xac),'fill':emptyColor});_0x4827e6[_0x536955(0xad)](_0x4dc357);const _0x12e1ba=createSvgElement(_0x536955(0xbd),{'id':_0x536955(0xb0)}),_0x285e4f=createSvgElement(_0x536955(0xbf),{'width':_0x216156['toString'](),'height':_0x7ecb79[_0x536955(0x9a)](),'fill':maskVisible});_0x12e1ba[_0x536955(0xad)](_0x285e4f);for(let _0xb8c5f3=0x0;_0xb8c5f3<ROWS;_0xb8c5f3++){for(let _0x1148b1=0x0;_0x1148b1<COLS;_0x1148b1++){const {cx:_0x563f76,cy:_0x4d4831}=calcCirclePosition(_0xb8c5f3,_0x1148b1),_0x588ff5=createCircle(_0x563f76,_0x4d4831,circleRadius,maskInvisible,0x1);_0x12e1ba[_0x536955(0xad)](_0x588ff5);}}_0x4827e6[_0x536955(0xad)](_0x12e1ba);const _0x15d69c=createSvgElement('g',{});_0x4827e6[_0x536955(0xad)](_0x15d69c);const _0x2eff64=createSvgElement(_0x536955(0xbf),{'width':_0x216156[_0x536955(0x9a)](),'height':_0x7ecb79[_0x536955(0x9a)](),'fill':boardColor,'mask':_0x536955(0xa8)});_0x4827e6[_0x536955(0xad)](_0x2eff64);const _0x10a71a=createSvgElement('g',{});_0x4827e6[_0x536955(0xad)](_0x10a71a);let _0x24473b=[];for(let _0x37b757=0x0;_0x37b757<ROWS;_0x37b757++){for(let _0x4043fa=0x0;_0x4043fa<COLS;_0x4043fa++){const {cx:_0xaa619a,cy:_0x16c630}=calcCirclePosition(_0x37b757,_0x4043fa),_0xcc8820=createCircle(_0xaa619a,_0x16c630,circleRadius,transparentColor);_0xcc8820[_0x536955(0xa6)]=()=>dropClick(_0x37b757,_0x4043fa,_0x2f82d0,_0x23fc2b,_0x24473b,_0x15d69c),_0x10a71a[_0x536955(0xad)](_0xcc8820),!_0x24473b[_0x37b757]&&(_0x24473b[_0x37b757]=[]),_0x24473b[_0x37b757][_0x4043fa]=_0xcc8820;}}return{'circles':_0x24473b,'dropper':_0x15d69c,'clickableCircles':_0x10a71a,'svg':_0x4827e6};}function dropClick(_0x4c4daa,_0x17e1ba,_0x2a7082,_0x16aa26,_0x2d329f,_0x193530){const _0xc3f852=a6_0x345053;console[_0xc3f852(0xc9)](_0xc3f852(0xaa)+_0x4c4daa+_0xc3f852(0xd2)+_0x17e1ba);if(!is_animation_playing){const _0x3959ac=loadState(),_0x4d8e60=getSessionById(_0x3959ac,_0x2a7082),_0x7337d3=getGameById(_0x4d8e60,_0x16aa26),{drop:_0x441389,message:_0x2b4c56}=canDrop(_0x7337d3,_0x7337d3[_0xc3f852(0xb1)],_0x17e1ba);if(_0x441389){is_animation_playing=!![];const _0x167262=getPlayerById(_0x4d8e60,_0x7337d3[_0xc3f852(0xb1)]);a6_0x46aa14['drop'](_0x7337d3,_0x167262['id'],_0x17e1ba),saveState(_0x3959ac),dropCircle(_0x2d329f,_0x193530,_0x17e1ba,_0x167262['color'],0x1f4,0x0,()=>{const _0x9f92ba=_0xc3f852,_0x59c774=getPlayerById(_0x4d8e60,_0x7337d3[_0x9f92ba(0xb1)]);updateScore(_0x4d8e60);const _0x1980bb=getBannerText(_0x4d8e60,_0x7337d3,_0x59c774);replaceContentById(bannerId,_0x1980bb);const {isWon:_0x29083e,isDraw:_0x370400}=_0x7337d3[_0x9f92ba(0xcf)];if(_0x29083e||_0x370400){const _0x181770=createGame(_0x4d8e60,_0x7337d3);addGame(_0x4d8e60,_0x181770),saveState(_0x3959ac),alert(_0x1980bb),route('game',{'sessionId':_0x2a7082,'gameId':_0x181770['id']},!![]);}is_animation_playing=![];});}else console[_0xc3f852(0xab)](_0xc3f852(0xae)+_0x2b4c56);}else console[_0xc3f852(0xab)](_0xc3f852(0x9c));}function dropCircle(_0x2349d6,_0x2c50e0,_0x14a080,_0x93efc3,_0x2e1176,_0x3a06d2,_0x3592dd){const _0x53e207=a6_0x345053;console[_0x53e207(0xc9)](_0x53e207(0xa1)+_0x14a080);for(let _0xb5811a=ROWS-0x1;_0xb5811a>=0x0;_0xb5811a--){if(_0x2349d6[_0xb5811a][_0x14a080][_0x53e207(0xd3)](_0x53e207(0xc6))===transparentColor){console[_0x53e207(0xc9)](_0x53e207(0xb7)+_0xb5811a+_0x53e207(0xd2)+_0x14a080);const _0x348b8b=_0x2349d6[_0xb5811a][_0x14a080],_0x49cd75=_0x348b8b[_0x53e207(0xd3)]('cx'),_0xdce4a3=_0x348b8b[_0x53e207(0xd3)]('cy');_0x348b8b[_0x53e207(0xdd)]();const _0x15ac1d=createCircle(_0x49cd75,circleRadius,circleRadius+0x1,_0x93efc3);_0x15ac1d['setAttribute']('opacity','0'),_0x2c50e0[_0x53e207(0xad)](_0x15ac1d),_0x2349d6[_0xb5811a][_0x14a080]=_0x15ac1d;const _0x102547=_0x15ac1d[_0x53e207(0x99)]([{'cy':circleRadius+'px','opacity':0x1},{'cy':_0xdce4a3+'px','opacity':0x1}],{'duration':_0x2e1176,'delay':_0x3a06d2,'fill':'forwards','easing':_0x53e207(0x94)});_0x102547[_0x53e207(0xcb)]=_0x3592dd;return;}}console['warn'](_0x53e207(0xa3)+_0x14a080+_0x53e207(0xd6));}function calcCirclePosition(_0x62ec37,_0x1ca7d2){const _0x43cd80=_0x1ca7d2*(circleRadius*0x2+spacing)+circleRadius,_0x54a4c5=_0x62ec37*(circleRadius*0x2+spacing)+circleRadius;return{'cx':_0x43cd80,'cy':_0x54a4c5};}function createCircle(_0x419699,_0x43a9c8,_0x572d58,_0x50af3a,..._0x5ee4f7){const _0x4301f4=a6_0x345053;return createSvgElement(_0x4301f4(0xc5),{'cx':_0x419699[_0x4301f4(0x9a)](),'cy':_0x43a9c8[_0x4301f4(0x9a)](),'r':_0x572d58[_0x4301f4(0x9a)](),'fill':_0x50af3a},..._0x5ee4f7);}function updateScore(_0x28768d){const _0x4bf685=a6_0x345053,{player1:_0x78ae4f,player2:_0x31b3d2}=getScore(_0x28768d);replaceContentById(player1ScoreNameId,_0x28768d[_0x4bf685(0xc7)][0x0][_0x4bf685(0xa0)]),replaceContentById(player2ScoreNameId,_0x28768d[_0x4bf685(0xc7)][0x1][_0x4bf685(0xa0)]),replaceContentById(player1ScoreId,_0x78ae4f[_0x4bf685(0x9a)]()),replaceContentById(player2ScoreId,_0x31b3d2[_0x4bf685(0x9a)]()),getElementById(player1ScoreId)['style'][_0x4bf685(0xdc)]=_0x28768d[_0x4bf685(0xc7)][0x0][_0x4bf685(0xdc)],getElementById(player2ScoreId)[_0x4bf685(0xa7)][_0x4bf685(0xdc)]=_0x28768d[_0x4bf685(0xc7)][0x1][_0x4bf685(0xdc)],getElementById(player1ScoreNameId)[_0x4bf685(0xa7)][_0x4bf685(0xdc)]=_0x28768d[_0x4bf685(0xc7)][0x0][_0x4bf685(0xdc)],getElementById(player2ScoreNameId)[_0x4bf685(0xa7)]['color']=_0x28768d['players'][0x1][_0x4bf685(0xdc)];}export{gameComponent};