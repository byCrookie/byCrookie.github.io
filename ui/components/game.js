const a6_0x2d0740=a6_0x1bab;(function(_0x230c5f,_0x2f6829){const _0x2e0cc3=a6_0x1bab,_0x16a12d=_0x230c5f();while(!![]){try{const _0x4ac257=parseInt(_0x2e0cc3(0x1a6))/0x1*(-parseInt(_0x2e0cc3(0x1c3))/0x2)+-parseInt(_0x2e0cc3(0x1b6))/0x3+parseInt(_0x2e0cc3(0x1bb))/0x4+parseInt(_0x2e0cc3(0x1bf))/0x5+-parseInt(_0x2e0cc3(0x1c8))/0x6+parseInt(_0x2e0cc3(0x1c7))/0x7+parseInt(_0x2e0cc3(0x1e0))/0x8;if(_0x4ac257===_0x2f6829)break;else _0x16a12d['push'](_0x16a12d['shift']());}catch(_0x5f3598){_0x16a12d['push'](_0x16a12d['shift']());}}}(a6_0x2a09,0x82e5d));import{route,replaceContentById,clearContent,createSvgElement,addClick,getElementById}from'../ui.js';import{addGame,getSessionById,hasSessionById,loadState,saveState}from'../../logic/state.js';import{getGameById,getPlayerById,getScore,hasGameById}from'../../logic/session.js';import{canDrop,COLS,createGame,ROWS}from'../../logic/game.js';function a6_0x2a09(){const _0x237b89=['undo','color','3089289wsEhMA','\x22\x20class=\x22text-3xl\x20font-bold\x22>0</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20text-zinc-500\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20mb-2\x22>vs</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x22>:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','getAttribute','warn','Replaying\x20move:\x20player\x20','3941844vHsRta','white','banner','fill','3288170UcBUPS','\x22\x20class=\x22text-zinc-400\x20text-lg\x20mb-2\x22>Player\x202</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','Clicked\x20on\x20row\x20','isDraw','340556yeUhuc','player','connect-four','100%','1809318bqYNED','5303664QurUgy','transparent','\x20in\x20column\x20','mask','setAttribute','debug','\x22\x20class=\x22px-4\x20pt-2\x20pb-3\x20bg-blue-500\x20text-white\x20font-semibold\x20rounded-lg\x20hover:bg-blue-600\x20focus:outline-none\x22>Undo</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','session','player1-score-name','winnerPlayerId','drop','circle-mask','\x20not\x20found,\x20redirecting\x20to\x20sessions','name','row','length','getElementById','moves','isWon','#18181B','Game\x20with\x20id\x20','nextPlayerId','column','rect','11197480TOiWRz','Can\x20not\x20undo:\x20','Can\x20not\x20drop:\x20','Dropping\x20circle\x20in\x20column\x20','url(#circle-mask)','players','\x20not\x20found,\x20redirecting\x20to\x20session\x20','\x22\x20class=\x22text-zinc-400\x20text-lg\x20mb-2\x22>Player\x201</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','forwards','0\x200\x20','5SPGWYP','sessions','\x22\x20class=\x22text-3xl\x20font-bold\x22>0</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','player2-score','style','toString','player2-score-name','player1-score','cubic-bezier(0.645,\x200.045,\x200.355,\x201.000)','onclick','appendChild','Dropping\x20circle\x20to\x20row\x20','\x20is\x20full','state'];a6_0x2a09=function(){return _0x237b89;};return a6_0x2a09();}import*as a6_0x57512c from'../../logic/game.js';const svgId=a6_0x2d0740(0x1c5),bannerId=a6_0x2d0740(0x1bd),player1ScoreId=a6_0x2d0740(0x1ad),player2ScoreId=a6_0x2d0740(0x1a9),player1ScoreNameId=a6_0x2d0740(0x1d0),player2ScoreNameId=a6_0x2d0740(0x1ac),undoId=a6_0x2d0740(0x1b4),circleRadius=0x14,spacing=0x1e,boardColor=a6_0x2d0740(0x1db),emptyColor=a6_0x2d0740(0x1bc),maskVisible='white',maskInvisible='black',transparentColor=a6_0x2d0740(0x1c9);let is_animation_playing=![];function gameComponent(){return{'html':html,'execute':execute};}function html(){const _0x212971=a6_0x2d0740;return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-center\x22>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-zinc-800/50\x20border\x20border-zinc-700\x20rounded-lg\x20p-6\x20mb-8\x20w-full\x20max-w-md\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22'+bannerId+'\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-center\x20items-center\x20gap-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22'+player1ScoreNameId+_0x212971(0x1a3)+player1ScoreId+_0x212971(0x1b7)+player2ScoreNameId+_0x212971(0x1c0)+player2ScoreId+_0x212971(0x1a8)+svgId+'\x22\x20class=\x22flex\x20justify-center\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-center\x20mt-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22'+undoId+_0x212971(0x1ce);}function execute(_0x24f258){const _0x41cb3b=a6_0x2d0740,{sessionId:_0x5e100e,gameId:_0x483c9f}=_0x24f258,_0xde7f78=loadState();if(!hasSessionById(_0xde7f78,_0x5e100e)){console['warn']('Session\x20with\x20id\x20'+_0x5e100e+_0x41cb3b(0x1d4)),route(_0x41cb3b(0x1a7),{},!![]);return;}const _0x7975b1=getSessionById(_0xde7f78,_0x5e100e);if(!hasGameById(_0x7975b1,_0x483c9f)){console[_0x41cb3b(0x1b9)](_0x41cb3b(0x1dc)+_0x483c9f+_0x41cb3b(0x1a2)+_0x5e100e),route(_0x41cb3b(0x1cf),{'sessionId':_0x5e100e},!![]);return;}const _0x555b48=getGameById(_0x7975b1,_0x483c9f),_0x19c325=getPlayerById(_0x7975b1,_0x555b48[_0x41cb3b(0x1dd)]);replaceContentById(bannerId,getBannerText(_0x7975b1,_0x555b48,_0x19c325)),updateScore(_0x7975b1);const {circles:_0x4ae1b8,dropper:_0x39f568,clickableCircles:_0x2c967d,svg:_0x5835cb}=createSvg(_0x5e100e,_0x483c9f),_0x20fd4b=document[_0x41cb3b(0x1d8)](_0x41cb3b(0x1c5));clearContent(_0x20fd4b),_0x20fd4b[_0x41cb3b(0x1b0)](_0x5835cb);let _0x2d1ae3=0x12c;for(let _0x1f2db5=0x0;_0x1f2db5<_0x555b48[_0x41cb3b(0x1d9)]['length'];_0x1f2db5++){const _0x37f41c=_0x555b48['moves'][_0x1f2db5];is_animation_playing=!![];const _0x33cd8e=getPlayerById(_0x7975b1,_0x37f41c[_0x41cb3b(0x1c4)]);console[_0x41cb3b(0x1cd)](_0x41cb3b(0x1ba)+_0x37f41c[_0x41cb3b(0x1c4)]+_0x41cb3b(0x1ca)+_0x37f41c[_0x41cb3b(0x1de)]),dropCircle(_0x4ae1b8,_0x39f568,_0x37f41c[_0x41cb3b(0x1de)],_0x33cd8e[_0x41cb3b(0x1b5)],_0x2d1ae3,_0x1f2db5*(_0x2d1ae3/0x2),()=>{const _0x4af048=_0x41cb3b;_0x1f2db5===_0x555b48['moves'][_0x4af048(0x1d7)]-0x1&&(is_animation_playing=![]);});}addClick(undoId,()=>{const _0x37260f=_0x41cb3b;if(!is_animation_playing){const _0x36dab2=loadState(),_0x1ac96c=getSessionById(_0x36dab2,_0x5e100e),_0x1eb1dd=getGameById(_0x1ac96c,_0x483c9f),{undo:_0x13a794,message:_0x1b81c9}=a6_0x57512c['canUndo'](_0x1eb1dd);if(_0x13a794){is_animation_playing=!![];const _0x32a813=a6_0x57512c[_0x37260f(0x1b4)](_0x1eb1dd);saveState(_0x36dab2),updateScore(_0x1ac96c);const _0x1709af=getPlayerById(_0x1ac96c,_0x32a813[_0x37260f(0x1c4)]);replaceContentById(bannerId,getBannerText(_0x1ac96c,_0x1eb1dd,_0x1709af));const _0x515009=_0x4ae1b8[_0x32a813[_0x37260f(0x1d6)]][_0x32a813[_0x37260f(0x1de)]];_0x39f568['removeChild'](_0x515009);const {cx:_0xaeaa8e,cy:_0x2537de}=calcCirclePosition(_0x32a813['row'],_0x32a813['column']),_0x59f605=createCircle(_0xaeaa8e,_0x2537de,circleRadius,transparentColor);_0x59f605[_0x37260f(0x1af)]=()=>dropClick(_0x32a813[_0x37260f(0x1d6)],_0x32a813['column'],_0x5e100e,_0x483c9f,_0x4ae1b8,_0x39f568),_0x2c967d[_0x37260f(0x1b0)](_0x59f605),_0x4ae1b8[_0x32a813['row']][_0x32a813[_0x37260f(0x1de)]]=_0x59f605,is_animation_playing=![];}else console[_0x37260f(0x1b9)](_0x37260f(0x1e1)+_0x1b81c9);}else console[_0x37260f(0x1b9)]('Animation\x20is\x20playing,\x20can\x20not\x20undo\x20move');});}function getBannerText(_0x1fe903,_0x470b0d,_0x5c9a89){const _0x17e214=a6_0x2d0740;if(_0x470b0d[_0x17e214(0x1b3)][_0x17e214(0x1da)]){const _0x274e24=getPlayerById(_0x1fe903,_0x470b0d['state'][_0x17e214(0x1d1)]);return _0x274e24[_0x17e214(0x1d5)]+'\x20won!';}if(_0x470b0d[_0x17e214(0x1b3)][_0x17e214(0x1c2)])return'Draw!';return'Your\x20turn\x20'+_0x5c9a89[_0x17e214(0x1d5)]+'!';}function createSvg(_0x4cdbc1,_0x135d63){const _0x12a756=a6_0x2d0740,_0x495ceb=COLS*(circleRadius*0x2+spacing)-spacing,_0x4b0d99=ROWS*(circleRadius*0x2+spacing)-spacing,_0x4b3e49=createSvgElement('svg',{'width':_0x495ceb[_0x12a756(0x1ab)](),'height':_0x4b0d99['toString'](),'viewBox':_0x12a756(0x1a5)+_0x495ceb+'\x20'+_0x4b0d99}),_0x2750a3=createSvgElement(_0x12a756(0x1df),{'width':'100%','height':_0x12a756(0x1c6),'fill':emptyColor});_0x4b3e49[_0x12a756(0x1b0)](_0x2750a3);const _0x4cce14=createSvgElement(_0x12a756(0x1cb),{'id':_0x12a756(0x1d3)}),_0x50bcb0=createSvgElement(_0x12a756(0x1df),{'width':_0x495ceb[_0x12a756(0x1ab)](),'height':_0x4b0d99[_0x12a756(0x1ab)](),'fill':maskVisible});_0x4cce14[_0x12a756(0x1b0)](_0x50bcb0);for(let _0x288e17=0x0;_0x288e17<ROWS;_0x288e17++){for(let _0x175a74=0x0;_0x175a74<COLS;_0x175a74++){const {cx:_0x49dccf,cy:_0x177f15}=calcCirclePosition(_0x288e17,_0x175a74),_0x52756b=createCircle(_0x49dccf,_0x177f15,circleRadius,maskInvisible,0x1);_0x4cce14[_0x12a756(0x1b0)](_0x52756b);}}_0x4b3e49[_0x12a756(0x1b0)](_0x4cce14);const _0x4bf71c=createSvgElement('g',{});_0x4b3e49[_0x12a756(0x1b0)](_0x4bf71c);const _0x5068cb=createSvgElement(_0x12a756(0x1df),{'width':_0x495ceb[_0x12a756(0x1ab)](),'height':_0x4b0d99[_0x12a756(0x1ab)](),'fill':boardColor,'mask':_0x12a756(0x1a0)});_0x4b3e49[_0x12a756(0x1b0)](_0x5068cb);const _0x28ddb1=createSvgElement('g',{});_0x4b3e49[_0x12a756(0x1b0)](_0x28ddb1);let _0x58b351=[];for(let _0x4bd95e=0x0;_0x4bd95e<ROWS;_0x4bd95e++){for(let _0x5a558d=0x0;_0x5a558d<COLS;_0x5a558d++){const {cx:_0x11f0a5,cy:_0x32fbfa}=calcCirclePosition(_0x4bd95e,_0x5a558d),_0x37e576=createCircle(_0x11f0a5,_0x32fbfa,circleRadius,transparentColor);_0x37e576['onclick']=()=>dropClick(_0x4bd95e,_0x5a558d,_0x4cdbc1,_0x135d63,_0x58b351,_0x4bf71c),_0x28ddb1['appendChild'](_0x37e576),!_0x58b351[_0x4bd95e]&&(_0x58b351[_0x4bd95e]=[]),_0x58b351[_0x4bd95e][_0x5a558d]=_0x37e576;}}return{'circles':_0x58b351,'dropper':_0x4bf71c,'clickableCircles':_0x28ddb1,'svg':_0x4b3e49};}function dropClick(_0x1650e3,_0x526e54,_0x231abb,_0x4b5d3b,_0x4e5d63,_0xb0173e){const _0x55efd4=a6_0x2d0740;console[_0x55efd4(0x1cd)](_0x55efd4(0x1c1)+_0x1650e3+',\x20col\x20'+_0x526e54);if(!is_animation_playing){const _0x51be29=loadState(),_0x2053a7=getSessionById(_0x51be29,_0x231abb),_0x17f7a8=getGameById(_0x2053a7,_0x4b5d3b),{drop:_0x35d197,message:_0x550e4a}=canDrop(_0x17f7a8,_0x17f7a8[_0x55efd4(0x1dd)],_0x526e54);if(_0x35d197){is_animation_playing=!![];const _0x267b39=getPlayerById(_0x2053a7,_0x17f7a8[_0x55efd4(0x1dd)]);a6_0x57512c[_0x55efd4(0x1d2)](_0x17f7a8,_0x267b39['id'],_0x526e54),saveState(_0x51be29),dropCircle(_0x4e5d63,_0xb0173e,_0x526e54,_0x267b39[_0x55efd4(0x1b5)],0x1f4,0x0,()=>{const _0x45fc4a=_0x55efd4,_0x3bf682=getPlayerById(_0x2053a7,_0x17f7a8[_0x45fc4a(0x1dd)]);updateScore(_0x2053a7);const _0x211e8d=getBannerText(_0x2053a7,_0x17f7a8,_0x3bf682);replaceContentById(bannerId,_0x211e8d);const {isWon:_0x4e4004,isDraw:_0x27afe2}=_0x17f7a8[_0x45fc4a(0x1b3)];if(_0x4e4004||_0x27afe2){const _0x1be1e4=createGame(_0x2053a7,_0x17f7a8);addGame(_0x2053a7,_0x1be1e4),saveState(_0x51be29),alert(_0x211e8d),route('game',{'sessionId':_0x231abb,'gameId':_0x1be1e4['id']},!![]);}is_animation_playing=![];});}else console[_0x55efd4(0x1b9)](_0x55efd4(0x1e2)+_0x550e4a);}else console['warn']('Animation\x20is\x20playing,\x20can\x20not\x20drop\x20circle');}function dropCircle(_0x118284,_0x4c5645,_0x452a9b,_0x70217a,_0x573846,_0x5e9b2f,_0x3383e2){const _0x580d38=a6_0x2d0740;console[_0x580d38(0x1cd)](_0x580d38(0x19f)+_0x452a9b);for(let _0xd96738=ROWS-0x1;_0xd96738>=0x0;_0xd96738--){if(_0x118284[_0xd96738][_0x452a9b][_0x580d38(0x1b8)](_0x580d38(0x1be))===transparentColor){console[_0x580d38(0x1cd)](_0x580d38(0x1b1)+_0xd96738+',\x20col\x20'+_0x452a9b);const _0x256537=_0x118284[_0xd96738][_0x452a9b],_0x193439=_0x256537[_0x580d38(0x1b8)]('cx'),_0x35188e=_0x256537[_0x580d38(0x1b8)]('cy');_0x256537['remove']();const _0x5cc4c8=createCircle(_0x193439,circleRadius,circleRadius+0x1,_0x70217a);_0x5cc4c8[_0x580d38(0x1cc)]('opacity','0'),_0x4c5645[_0x580d38(0x1b0)](_0x5cc4c8),_0x118284[_0xd96738][_0x452a9b]=_0x5cc4c8;const _0x3a27e8=_0x5cc4c8['animate']([{'cy':circleRadius+'px','opacity':0x1},{'cy':_0x35188e+'px','opacity':0x1}],{'duration':_0x573846,'delay':_0x5e9b2f,'fill':_0x580d38(0x1a4),'easing':_0x580d38(0x1ae)});_0x3a27e8['onfinish']=_0x3383e2;return;}}console[_0x580d38(0x1b9)]('Column\x20'+_0x452a9b+_0x580d38(0x1b2));}function calcCirclePosition(_0x32b702,_0x253724){const _0x444b83=_0x253724*(circleRadius*0x2+spacing)+circleRadius,_0x548af2=_0x32b702*(circleRadius*0x2+spacing)+circleRadius;return{'cx':_0x444b83,'cy':_0x548af2};}function a6_0x1bab(_0x29a732,_0x4880a9){const _0x2a09be=a6_0x2a09();return a6_0x1bab=function(_0x1bab19,_0x533ed6){_0x1bab19=_0x1bab19-0x19f;let _0x5af8bf=_0x2a09be[_0x1bab19];return _0x5af8bf;},a6_0x1bab(_0x29a732,_0x4880a9);}function createCircle(_0x486af1,_0x1e1f16,_0x336460,_0x5abe77,..._0x1f6e36){const _0x2fffb8=a6_0x2d0740;return createSvgElement('circle',{'cx':_0x486af1['toString'](),'cy':_0x1e1f16[_0x2fffb8(0x1ab)](),'r':_0x336460[_0x2fffb8(0x1ab)](),'fill':_0x5abe77},..._0x1f6e36);}function updateScore(_0x2ad0db){const _0x3517e1=a6_0x2d0740,{player1:_0x2e23ed,player2:_0x49cf2b}=getScore(_0x2ad0db);replaceContentById(player1ScoreNameId,_0x2ad0db[_0x3517e1(0x1a1)][0x0]['name']),replaceContentById(player2ScoreNameId,_0x2ad0db['players'][0x1][_0x3517e1(0x1d5)]),replaceContentById(player1ScoreId,_0x2e23ed[_0x3517e1(0x1ab)]()),replaceContentById(player2ScoreId,_0x49cf2b[_0x3517e1(0x1ab)]()),getElementById(player1ScoreId)[_0x3517e1(0x1aa)][_0x3517e1(0x1b5)]=_0x2ad0db[_0x3517e1(0x1a1)][0x0][_0x3517e1(0x1b5)],getElementById(player2ScoreId)['style'][_0x3517e1(0x1b5)]=_0x2ad0db['players'][0x1][_0x3517e1(0x1b5)],getElementById(player1ScoreNameId)[_0x3517e1(0x1aa)][_0x3517e1(0x1b5)]=_0x2ad0db['players'][0x0]['color'],getElementById(player2ScoreNameId)[_0x3517e1(0x1aa)][_0x3517e1(0x1b5)]=_0x2ad0db[_0x3517e1(0x1a1)][0x1][_0x3517e1(0x1b5)];}export{gameComponent};