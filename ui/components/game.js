const a6_0x49ae1c=a6_0x5a5e;(function(_0x4beff6,_0x2e109b){const _0x250e24=a6_0x5a5e,_0x198f3d=_0x4beff6();while(!![]){try{const _0x102bd4=parseInt(_0x250e24(0x20a))/0x1*(-parseInt(_0x250e24(0x202))/0x2)+-parseInt(_0x250e24(0x21d))/0x3+parseInt(_0x250e24(0x236))/0x4*(-parseInt(_0x250e24(0x1f7))/0x5)+-parseInt(_0x250e24(0x1f6))/0x6+-parseInt(_0x250e24(0x219))/0x7*(-parseInt(_0x250e24(0x222))/0x8)+-parseInt(_0x250e24(0x238))/0x9+parseInt(_0x250e24(0x232))/0xa*(parseInt(_0x250e24(0x22d))/0xb);if(_0x102bd4===_0x2e109b)break;else _0x198f3d['push'](_0x198f3d['shift']());}catch(_0x321bbb){_0x198f3d['push'](_0x198f3d['shift']());}}}(a6_0x5d73,0x1a674));import{route,replaceContentById,clearContent,createSvgElement,addClick,getElementById}from'../ui.js';function a6_0x5a5e(_0x5abc69,_0x3d64b1){const _0x5d73a2=a6_0x5d73();return a6_0x5a5e=function(_0x5a5e26,_0x2aaf4f){_0x5a5e26=_0x5a5e26-0x1f2;let _0x5e4905=_0x5d73a2[_0x5a5e26];return _0x5e4905;},a6_0x5a5e(_0x5abc69,_0x3d64b1);}import{addGame,getSessionById,loadState,saveState}from'../../logic/state.js';import{getGameById,getPlayerById,getScore}from'../../logic/session.js';import{canDrop,COLS,createGame,ROWS}from'../../logic/game.js';import*as a6_0x39789d from'../../logic/game.js';const svgId=a6_0x49ae1c(0x210),bannerId=a6_0x49ae1c(0x226),player1ScoreId=a6_0x49ae1c(0x229),player2ScoreId=a6_0x49ae1c(0x20d),player1ScoreNameId=a6_0x49ae1c(0x225),player2ScoreNameId='player2-score-name',undoId=a6_0x49ae1c(0x21e),circleRadius=0x14,spacing=0x1e,boardColor=a6_0x49ae1c(0x1fe),emptyColor=a6_0x49ae1c(0x201),maskVisible=a6_0x49ae1c(0x201),maskInvisible=a6_0x49ae1c(0x1fa),transparentColor=a6_0x49ae1c(0x1fb);let is_animation_playing=![];function gameComponent(){return{'html':html,'execute':execute};}function html(){const _0x43fe83=a6_0x49ae1c;return _0x43fe83(0x20b)+bannerId+'\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-center\x20items-center\x20gap-12\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22'+player1ScoreNameId+'\x22\x20class=\x22text-zinc-400\x20text-lg\x20mb-2\x22>Player\x201</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22'+player1ScoreId+'\x22\x20class=\x22text-3xl\x20font-bold\x22>0</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20text-zinc-500\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-lg\x20mb-2\x22>vs</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-2xl\x20font-bold\x22>:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22'+player2ScoreNameId+_0x43fe83(0x206)+player2ScoreId+_0x43fe83(0x214)+svgId+_0x43fe83(0x203)+undoId+_0x43fe83(0x231);}function execute(_0x6f254b){const _0x2eac70=a6_0x49ae1c,{sessionId:_0x48cda1,gameId:_0xb7e8f}=_0x6f254b,_0x618b79=loadState(),_0x3697da=getSessionById(_0x618b79,_0x48cda1),_0x128fef=getGameById(_0x3697da,_0xb7e8f),_0x1e370c=getPlayerById(_0x3697da,_0x128fef[_0x2eac70(0x218)]);replaceContentById(bannerId,getBannerText(_0x3697da,_0x128fef,_0x1e370c)),updateScore(_0x3697da);const {circles:_0x3a69d6,dropper:_0x522ba1,clickableCircles:_0x4a00f9,svg:_0x18901e}=createSvg(_0x48cda1,_0xb7e8f),_0x34dfac=document[_0x2eac70(0x1ff)](_0x2eac70(0x210));clearContent(_0x34dfac),_0x34dfac['appendChild'](_0x18901e);let _0x3c72f7=0x12c;for(let _0x1dda71=0x0;_0x1dda71<_0x128fef[_0x2eac70(0x205)][_0x2eac70(0x22b)];_0x1dda71++){const _0x4aa8c4=_0x128fef[_0x2eac70(0x205)][_0x1dda71];is_animation_playing=!![];const _0xbb5bd4=getPlayerById(_0x3697da,_0x4aa8c4[_0x2eac70(0x20c)]);console['debug'](_0x2eac70(0x21b)+_0x4aa8c4[_0x2eac70(0x20c)]+'\x20in\x20column\x20'+_0x4aa8c4[_0x2eac70(0x233)]),dropCircle(_0x3a69d6,_0x522ba1,_0x4aa8c4[_0x2eac70(0x233)],_0xbb5bd4[_0x2eac70(0x21a)],_0x3c72f7,_0x1dda71*(_0x3c72f7/0x2),()=>{const _0x22b004=_0x2eac70;_0x1dda71===_0x128fef[_0x22b004(0x205)][_0x22b004(0x22b)]-0x1&&(is_animation_playing=![]);});}addClick(undoId,()=>{const _0x18d2c9=_0x2eac70;if(!is_animation_playing){const _0x3eb11d=loadState(),_0x461f7f=getSessionById(_0x3eb11d,_0x48cda1),_0x41b59a=getGameById(_0x461f7f,_0xb7e8f),{undo:_0x231ef4,message:_0x2581d1}=a6_0x39789d['canUndo'](_0x41b59a);if(_0x231ef4){is_animation_playing=!![];const _0x312e3c=a6_0x39789d['undo'](_0x41b59a);saveState(_0x3eb11d),updateScore(_0x461f7f);const _0x321b72=getPlayerById(_0x461f7f,_0x312e3c['player']);replaceContentById(bannerId,getBannerText(_0x461f7f,_0x41b59a,_0x321b72));const _0x29d9f3=_0x3a69d6[_0x312e3c['row']][_0x312e3c[_0x18d2c9(0x233)]];_0x522ba1[_0x18d2c9(0x215)](_0x29d9f3);const {cx:_0x2ecd73,cy:_0x3fcb44}=calcCirclePosition(_0x312e3c[_0x18d2c9(0x22e)],_0x312e3c[_0x18d2c9(0x233)]),_0x4c4037=createCircle(_0x2ecd73,_0x3fcb44,circleRadius,transparentColor);_0x4c4037['onclick']=()=>dropClick(_0x312e3c['row'],_0x312e3c['column'],_0x48cda1,_0xb7e8f,_0x3a69d6,_0x522ba1),_0x4a00f9['appendChild'](_0x4c4037),_0x3a69d6[_0x312e3c[_0x18d2c9(0x22e)]][_0x312e3c[_0x18d2c9(0x233)]]=_0x4c4037,is_animation_playing=![];}else console[_0x18d2c9(0x207)]('Can\x20not\x20undo:\x20'+_0x2581d1);}else console['warn'](_0x18d2c9(0x21f));});}function getBannerText(_0x488921,_0xd9c64,_0x40e963){const _0x3f6e32=a6_0x49ae1c;if(_0xd9c64[_0x3f6e32(0x20f)]['isWon']){const _0x4f8ff4=getPlayerById(_0x488921,_0xd9c64['state'][_0x3f6e32(0x217)]);return _0x4f8ff4['name']+'\x20won!';}if(_0xd9c64[_0x3f6e32(0x20f)][_0x3f6e32(0x223)])return _0x3f6e32(0x1fc);return _0x3f6e32(0x211)+_0x40e963[_0x3f6e32(0x22f)]+'!';}function createSvg(_0x1668fc,_0x3ee63f){const _0x41219f=a6_0x49ae1c,_0x3d66c8=COLS*(circleRadius*0x2+spacing)-spacing,_0x5ab538=ROWS*(circleRadius*0x2+spacing)-spacing,_0x2c5380=createSvgElement(_0x41219f(0x22a),{'width':_0x3d66c8[_0x41219f(0x234)](),'height':_0x5ab538[_0x41219f(0x234)](),'viewBox':_0x41219f(0x209)+_0x3d66c8+'\x20'+_0x5ab538}),_0xa4b0ac=createSvgElement('rect',{'width':_0x41219f(0x237),'height':_0x41219f(0x237),'fill':emptyColor});_0x2c5380[_0x41219f(0x208)](_0xa4b0ac);const _0xfc67b9=createSvgElement(_0x41219f(0x20e),{'id':_0x41219f(0x228)}),_0x259d83=createSvgElement('rect',{'width':_0x3d66c8['toString'](),'height':_0x5ab538['toString'](),'fill':maskVisible});_0xfc67b9[_0x41219f(0x208)](_0x259d83);for(let _0x27b841=0x0;_0x27b841<ROWS;_0x27b841++){for(let _0x24c301=0x0;_0x24c301<COLS;_0x24c301++){const {cx:_0x357562,cy:_0x5e581e}=calcCirclePosition(_0x27b841,_0x24c301),_0x1f1d96=createCircle(_0x357562,_0x5e581e,circleRadius,maskInvisible,0x1);_0xfc67b9[_0x41219f(0x208)](_0x1f1d96);}}_0x2c5380['appendChild'](_0xfc67b9);const _0x1e4bb9=createSvgElement('g',{});_0x2c5380['appendChild'](_0x1e4bb9);const _0x57568d=createSvgElement(_0x41219f(0x1f5),{'width':_0x3d66c8[_0x41219f(0x234)](),'height':_0x5ab538[_0x41219f(0x234)](),'fill':boardColor,'mask':'url(#circle-mask)'});_0x2c5380[_0x41219f(0x208)](_0x57568d);const _0x234cb2=createSvgElement('g',{});_0x2c5380['appendChild'](_0x234cb2);let _0x3a6a43=[];for(let _0x9551ff=0x0;_0x9551ff<ROWS;_0x9551ff++){for(let _0x3a7054=0x0;_0x3a7054<COLS;_0x3a7054++){const {cx:_0x4dc11f,cy:_0x6f06f8}=calcCirclePosition(_0x9551ff,_0x3a7054),_0x458107=createCircle(_0x4dc11f,_0x6f06f8,circleRadius,transparentColor);_0x458107[_0x41219f(0x220)]=()=>dropClick(_0x9551ff,_0x3a7054,_0x1668fc,_0x3ee63f,_0x3a6a43,_0x1e4bb9),_0x234cb2[_0x41219f(0x208)](_0x458107),!_0x3a6a43[_0x9551ff]&&(_0x3a6a43[_0x9551ff]=[]),_0x3a6a43[_0x9551ff][_0x3a7054]=_0x458107;}}return{'circles':_0x3a6a43,'dropper':_0x1e4bb9,'clickableCircles':_0x234cb2,'svg':_0x2c5380};}function dropClick(_0x48bc44,_0x2985d6,_0x4a9740,_0x3e28fd,_0x44f9e8,_0x58381b){const _0x1b133d=a6_0x49ae1c;console['debug'](_0x1b133d(0x212)+_0x48bc44+_0x1b133d(0x230)+_0x2985d6);if(!is_animation_playing){const _0x33e53c=loadState(),_0x2f30ae=getSessionById(_0x33e53c,_0x4a9740),_0x3174ca=getGameById(_0x2f30ae,_0x3e28fd),{drop:_0x59be97,message:_0x3747fb}=canDrop(_0x3174ca,_0x3174ca['nextPlayerId'],_0x2985d6);if(_0x59be97){is_animation_playing=!![];const _0x27ff31=getPlayerById(_0x2f30ae,_0x3174ca[_0x1b133d(0x218)]);a6_0x39789d[_0x1b133d(0x21c)](_0x3174ca,_0x27ff31['id'],_0x2985d6),saveState(_0x33e53c),dropCircle(_0x44f9e8,_0x58381b,_0x2985d6,_0x27ff31[_0x1b133d(0x21a)],0x1f4,0x0,()=>{const _0x3f6b93=_0x1b133d,_0x5344f4=getPlayerById(_0x2f30ae,_0x3174ca['nextPlayerId']);updateScore(_0x2f30ae);const _0x37d357=getBannerText(_0x2f30ae,_0x3174ca,_0x5344f4);replaceContentById(bannerId,_0x37d357);const {isWon:_0x16465e,isDraw:_0x4dd1de}=_0x3174ca['state'];if(_0x16465e||_0x4dd1de){const _0x128d6c=createGame(_0x2f30ae,_0x3174ca);addGame(_0x2f30ae,_0x128d6c),saveState(_0x33e53c),alert(_0x37d357),route(_0x3f6b93(0x1fd),{'sessionId':_0x4a9740,'gameId':_0x128d6c['id']},!![]);}is_animation_playing=![];});}else console[_0x1b133d(0x207)](_0x1b133d(0x1f4)+_0x3747fb);}else console[_0x1b133d(0x207)](_0x1b133d(0x227));}function dropCircle(_0x58c9b5,_0x5a5364,_0x2004ea,_0x9d93e2,_0x1cfed7,_0x38473e,_0x1d675a){const _0x1a7220=a6_0x49ae1c;console[_0x1a7220(0x221)]('Dropping\x20circle\x20in\x20column\x20'+_0x2004ea);for(let _0xb18d25=ROWS-0x1;_0xb18d25>=0x0;_0xb18d25--){if(_0x58c9b5[_0xb18d25][_0x2004ea][_0x1a7220(0x1f3)]('fill')===transparentColor){console[_0x1a7220(0x221)](_0x1a7220(0x235)+_0xb18d25+_0x1a7220(0x230)+_0x2004ea);const _0x603b0d=_0x58c9b5[_0xb18d25][_0x2004ea],_0x42fdf8=_0x603b0d['getAttribute']('cx'),_0x46dc04=_0x603b0d['getAttribute']('cy');_0x603b0d['remove']();const _0x5e3364=createCircle(_0x42fdf8,circleRadius,circleRadius+0x1,_0x9d93e2);_0x5e3364['setAttribute'](_0x1a7220(0x216),'0'),_0x5a5364[_0x1a7220(0x208)](_0x5e3364),_0x58c9b5[_0xb18d25][_0x2004ea]=_0x5e3364;const _0x578152=_0x5e3364['animate']([{'cy':circleRadius+'px','opacity':0x1},{'cy':_0x46dc04+'px','opacity':0x1}],{'duration':_0x1cfed7,'delay':_0x38473e,'fill':_0x1a7220(0x1f8),'easing':_0x1a7220(0x224)});_0x578152[_0x1a7220(0x200)]=_0x1d675a;return;}}console[_0x1a7220(0x207)](_0x1a7220(0x204)+_0x2004ea+_0x1a7220(0x1f2));}function calcCirclePosition(_0x4029a0,_0x184f66){const _0x140e36=_0x184f66*(circleRadius*0x2+spacing)+circleRadius,_0x1d44ec=_0x4029a0*(circleRadius*0x2+spacing)+circleRadius;return{'cx':_0x140e36,'cy':_0x1d44ec};}function createCircle(_0x57382e,_0x48431f,_0x1b7fc4,_0x1651dc,..._0x26610d){const _0xcd9675=a6_0x49ae1c;return createSvgElement(_0xcd9675(0x22c),{'cx':_0x57382e['toString'](),'cy':_0x48431f[_0xcd9675(0x234)](),'r':_0x1b7fc4[_0xcd9675(0x234)](),'fill':_0x1651dc},..._0x26610d);}function a6_0x5d73(){const _0x4f51b2=['\x22\x20class=\x22text-3xl\x20font-bold\x22>0</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22w-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','removeChild','opacity','winnerPlayerId','nextPlayerId','1351511leKwVr','color','Replaying\x20move:\x20player\x20','drop','318498tJSWBY','undo','Animation\x20is\x20playing,\x20can\x20not\x20undo\x20move','onclick','debug','8UUUyCT','isDraw','cubic-bezier(0.645,\x200.045,\x200.355,\x201.000)','player1-score-name','banner','Animation\x20is\x20playing,\x20can\x20not\x20drop\x20circle','circle-mask','player1-score','svg','length','circle','4854245jDFglq','row','name',',\x20col\x20','\x22\x20class=\x22px-4\x20pt-2\x20pb-3\x20bg-blue-500\x20text-white\x20font-semibold\x20rounded-lg\x20hover:bg-blue-600\x20focus:outline-none\x22>Undo</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','10DVqqkY','column','toString','Dropping\x20circle\x20to\x20row\x20','82532wvXGiN','100%','1737711PLxZRu','\x20is\x20full','getAttribute','Can\x20not\x20drop:\x20','rect','891234bUkELi','10eiDxEZ','forwards','style','black','transparent','Draw!','game','#18181B','getElementById','onfinish','white','210SYvOif','\x22\x20class=\x22flex\x20justify-center\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20justify-center\x20mt-8\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22','Column\x20','moves','\x22\x20class=\x22text-zinc-400\x20text-lg\x20mb-2\x22>Player\x202</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20id=\x22','warn','appendChild','0\x200\x20','354nKCHkd','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-center\x22>\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bg-zinc-800/50\x20border\x20border-zinc-700\x20rounded-lg\x20p-6\x20mb-8\x20w-full\x20max-w-md\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-center\x20mb-5\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','player','player2-score','mask','state','connect-four','Your\x20turn\x20','Clicked\x20on\x20row\x20','players'];a6_0x5d73=function(){return _0x4f51b2;};return a6_0x5d73();}function updateScore(_0x39cfa3){const _0x39135f=a6_0x49ae1c,{player1:_0x6b8757,player2:_0x4369be}=getScore(_0x39cfa3);replaceContentById(player1ScoreNameId,_0x39cfa3[_0x39135f(0x213)][0x0][_0x39135f(0x22f)]),replaceContentById(player2ScoreNameId,_0x39cfa3[_0x39135f(0x213)][0x1][_0x39135f(0x22f)]),replaceContentById(player1ScoreId,_0x6b8757['toString']()),replaceContentById(player2ScoreId,_0x4369be['toString']()),getElementById(player1ScoreId)[_0x39135f(0x1f9)][_0x39135f(0x21a)]=_0x39cfa3[_0x39135f(0x213)][0x0][_0x39135f(0x21a)],getElementById(player2ScoreId)[_0x39135f(0x1f9)][_0x39135f(0x21a)]=_0x39cfa3['players'][0x1][_0x39135f(0x21a)],getElementById(player1ScoreNameId)[_0x39135f(0x1f9)]['color']=_0x39cfa3[_0x39135f(0x213)][0x0][_0x39135f(0x21a)],getElementById(player2ScoreNameId)[_0x39135f(0x1f9)]['color']=_0x39cfa3[_0x39135f(0x213)][0x1][_0x39135f(0x21a)];}export{gameComponent};